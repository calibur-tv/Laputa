<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>calibur.tv - 天下漫友是一家</title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="https://static.calibur.tv/favicon.ico">
    
    <link rel="preload" href="/Laputa/assets/css/0.styles.c4c0b6bf.css" as="style"><link rel="preload" href="/Laputa/assets/js/app.7a57e0d5.js" as="script"><link rel="preload" href="/Laputa/assets/js/15.a88919fa.js" as="script"><link rel="prefetch" href="/Laputa/assets/js/7.b945083d.js"><link rel="prefetch" href="/Laputa/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/Laputa/assets/js/3.6992acff.js"><link rel="prefetch" href="/Laputa/assets/js/4.d9eba96a.js"><link rel="prefetch" href="/Laputa/assets/js/5.1f0a9a55.js"><link rel="prefetch" href="/Laputa/assets/js/6.060cf774.js"><link rel="prefetch" href="/Laputa/assets/js/8.f3dc8888.js"><link rel="prefetch" href="/Laputa/assets/js/9.bff53713.js"><link rel="prefetch" href="/Laputa/assets/js/10.c94bd25f.js"><link rel="prefetch" href="/Laputa/assets/js/11.96853274.js"><link rel="prefetch" href="/Laputa/assets/js/12.20ccc4de.js"><link rel="prefetch" href="/Laputa/assets/js/13.89aa3bfd.js"><link rel="prefetch" href="/Laputa/assets/js/14.cb8a7ba3.js"><link rel="prefetch" href="/Laputa/assets/js/16.cc72bd45.js">
    <link rel="stylesheet" href="/Laputa/assets/css/0.styles.c4c0b6bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Laputa/" class="home-link router-link-active"><!----> <span class="site-name">calibur.tv - 天下漫友是一家</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Laputa/" class="sidebar-link">首页</a></li><li><a href="/Laputa/api/v1/" class="active sidebar-link">接口文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#搜索接口-get-search-new" class="sidebar-link">搜索接口 [GET /search/new]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取所有番剧列表-get-search-bangumis" class="sidebar-link">获取所有番剧列表 [GET /search/bangumis]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#发送手机验证码-post-door-message" class="sidebar-link">发送手机验证码 [POST /door/message]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户注册-post-door-register" class="sidebar-link">用户注册 [POST /door/register]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户登录-post-door-login" class="sidebar-link">用户登录 [POST /door/login]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户登出-post-door-logout" class="sidebar-link">用户登出 [POST /door/logout]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取用户信息-post-door-refresh" class="sidebar-link">获取用户信息 [POST /door/refresh]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#重置密码-post-door-reset" class="sidebar-link">重置密码 [POST /door/reset]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#检测app版本-get-app-version-check" class="sidebar-link">检测App版本 [GET /app/version/check]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#番剧时间轴-get-bangumi-timeline" class="sidebar-link">番剧时间轴 [GET /bangumi/timeline]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#新番列表（周）-get-bangumi-released" class="sidebar-link">新番列表（周） [GET /bangumi/released]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#所有的番剧标签-get-bangumi-tags" class="sidebar-link">所有的番剧标签 [GET /bangumi/tags]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#根据标签获取番剧列表-get-bangumi-category" class="sidebar-link">根据标签获取番剧列表 [GET /bangumi/category]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#番剧详情-get-bangumi-bangumiid-show" class="sidebar-link">番剧详情 [GET /bangumi/bangumiId/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#番剧视频-get-bangumi-bangumiid-videos" class="sidebar-link">番剧视频 [GET /bangumi/bangumiId/videos]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#吧主编辑番剧信息-post-bangumi-bangumiid-edit" class="sidebar-link">吧主编辑番剧信息 [POST /bangumi/bangumiId/edit]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#新建帖子-post-post-create" class="sidebar-link">新建帖子 [POST /post/create]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#帖子详情-get-post-id-show" class="sidebar-link">帖子详情 [GET /post/{id}/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取番剧页的置顶帖子列表-get-bangumi-id-posts-top" class="sidebar-link">获取番剧页的置顶帖子列表 [GET /bangumi/{id}/posts/top]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除帖子-post-post-postid-deletepost" class="sidebar-link">删除帖子 [POST /post/postId/deletePost]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#设置帖子加精-post-post-manager-nice-set" class="sidebar-link">设置帖子加精 [POST /post/manager/nice/set]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#撤销帖子加精-post-post-manager-nice-remove" class="sidebar-link">撤销帖子加精 [POST /post/manager/nice/remove]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#撤销帖子置顶-post-post-manager-top-set" class="sidebar-link">撤销帖子置顶 [POST /post/manager/top/set]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#撤销帖子置顶-post-post-manager-top-remove" class="sidebar-link">撤销帖子置顶 [POST /post/manager/top/remove]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取首页banner图-get-image-banner" class="sidebar-link">获取首页banner图 [GET /image/banner]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取-geetest-验证码-get-image-captcha" class="sidebar-link">获取 Geetest 验证码 [GET /image/captcha]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取图片上传token-get-image-uptoken" class="sidebar-link">获取图片上传token [GET /image/uptoken]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#新建相册-post-image-album-create" class="sidebar-link">新建相册 [POST /image/album/create]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#编辑相册-post-image-album-edit" class="sidebar-link">编辑相册 [POST /image/album/edit]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#上传单张图片-post-image-single-upload" class="sidebar-link">上传单张图片 [POST /image/single/upload]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#编辑单张图片-post-image-single-edit" class="sidebar-link">编辑单张图片 [POST /image/single/edit]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#上传相册内图片-post-image-album-upload" class="sidebar-link">上传相册内图片 [POST /image/album/upload]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#自己的相册列表-get-image-album-users" class="sidebar-link">自己的相册列表 [GET /image/album/users]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除某个相册-post-image-album-delete" class="sidebar-link">删除某个相册 [POST /image/album/delete]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#图片详情页-get-image-image-id-show" class="sidebar-link">图片详情页 [GET /image/${image_id}/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#番剧漫画列表-get-bangumi-bangumi-id-cartoon" class="sidebar-link">番剧漫画列表 [GET /bangumi/${bangumi_id}/cartoon]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#相册内图片的排序-post-image-album-albumid-sort" class="sidebar-link">相册内图片的排序 [POST /image/album/albumId/sort]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除相册里的图片-post-image-album-albumid-deleteimage" class="sidebar-link">删除相册里的图片 [POST /image/album/albumId/deleteImage]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取视频资源-get-video-videoid-show" class="sidebar-link">获取视频资源 [GET /video/${videoId}/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#记录视频播放信息-get-video-videoid-playing" class="sidebar-link">记录视频播放信息 [GET /video/${videoId}/playing]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取漫评详情-get-score-id-show" class="sidebar-link">获取漫评详情 [GET /score/{id}/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#编辑漫评时，根据-id-获取数据-get-score-id-edit" class="sidebar-link">编辑漫评时，根据 id 获取数据 [GET /score/{id}/edit]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取番剧的漫评总分-post-score-bangumis" class="sidebar-link">获取番剧的漫评总分 [POST /score/bangumis]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取用户的漫评草稿列表-get-score-drafts" class="sidebar-link">获取用户的漫评草稿列表 [GET /score/drafts]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#创建漫评-post-score-check" class="sidebar-link">创建漫评 [POST /score/check]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#创建漫评-post-score-cerate" class="sidebar-link">创建漫评 [POST /score/cerate]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#更新漫评-post-score-update" class="sidebar-link">更新漫评 [POST /score/update]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除漫评-post-score-delete" class="sidebar-link">删除漫评 [POST /score/delete]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取提问详情-get-question-qaq-id-show" class="sidebar-link">获取提问详情 [GET /question/qaq/{id}/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#创建提问-post-question-qaq-cerate" class="sidebar-link">创建提问 [POST /question/qaq/cerate]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取回答详情-get-question-soga-id-show" class="sidebar-link">获取回答详情 [GET /question/soga/{id}/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#编辑回答时，根据-id-获取数据-get-question-soga-id-resource" class="sidebar-link">编辑回答时，根据 id 获取数据 [GET /question/soga/{id}/resource]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#创建回答-post-question-soga-id-create" class="sidebar-link">创建回答 [POST /question/soga/{id}/create]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#更新自己的回答-post-question-soga-id-update" class="sidebar-link">更新自己的回答 [POST /question/soga/{id}/update]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除自己的回答-post-question-soga-id-delete" class="sidebar-link">删除自己的回答 [POST /question/soga/{id}/delete]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取用户的回答草稿列表-get-question-soga-drafts" class="sidebar-link">获取用户的回答草稿列表 [GET /question/soga/drafts]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户每日签到-post-user-daysign" class="sidebar-link">用户每日签到 [POST /user/daySign]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户详情-get-user-zone-show" class="sidebar-link">用户详情 [GET /user/zone/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#更新用户资料中的图片-post-user-setting-image" class="sidebar-link">更新用户资料中的图片 [POST /user/setting/image]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#更新用户资料中文本-post-user-setting-profile" class="sidebar-link">更新用户资料中文本 [POST /user/setting/profile]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户关注的番剧列表-get-user-zone-followed-bangumi" class="sidebar-link">用户关注的番剧列表 [GET /user/zone/followed/bangumi]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户回复的帖子列表-get-user-zone-posts-reply" class="sidebar-link">用户回复的帖子列表 [GET /user/zone/posts/reply]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户反馈-post-user-feedback" class="sidebar-link">用户反馈 [POST /user/feedback]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户消息列表-get-user-notification-list" class="sidebar-link">用户消息列表 [GET /user/notification/list]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#用户未读消息个数-get-user-notification-count" class="sidebar-link">用户未读消息个数 [GET /user/notification/count]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#读取某条消息-post-user-notification-read" class="sidebar-link">读取某条消息 [POST /user/notification/read]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#清空未读消息-post-user-notification-clear" class="sidebar-link">清空未读消息 [POST /user/notification/clear]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#新建主评论-post-comment-main-create" class="sidebar-link">新建主评论 [POST /comment/main/create]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取主评论列表-get-comment-main-list" class="sidebar-link">获取主评论列表 [GET /comment/main/list]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#子评论列表-get-comment-sub-list" class="sidebar-link">子评论列表 [GET /comment/sub/list]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#回复评论-post-comment-main-reply" class="sidebar-link">回复评论 [POST /comment/main/reply]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除主评论-post-comment-main-delete" class="sidebar-link">删除主评论 [POST /comment/main/delete]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#喜欢-取消喜欢-主评论-post-comment-main-togglelike" class="sidebar-link">&lt;喜欢/取消喜欢&gt;主评论 [POST /comment/main/toggleLike]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#喜欢-取消喜欢-子评论-post-comment-sub-togglelike" class="sidebar-link">&lt;喜欢/取消喜欢&gt;子评论 [POST /comment/sub/toggleLike]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#删除子评论-post-comment-sub-delete" class="sidebar-link">删除子评论 [POST /comment/sub/delete]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#给角色应援-post-cartoon-role-roleid-star" class="sidebar-link">给角色应援 [POST /cartoon_role/roleId/star]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#角色的粉丝列表-post-cartoon-role-roleid-fans" class="sidebar-link">角色的粉丝列表 [POST /cartoon_role/roleId/fans]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#角色详情-get-cartoon-role-roleid-show" class="sidebar-link">角色详情 [GET /cartoon_role/roleId/show]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#创建偶像-post-cartoon-role-manager-create" class="sidebar-link">创建偶像 [POST /cartoon_role/manager/create]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#编辑偶像-post-cartoon-role-manager-edit" class="sidebar-link">编辑偶像 [POST /cartoon_role/manager/edit]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取信息流列表-get-flow-list" class="sidebar-link">获取信息流列表 [GET /flow/list]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#检查toggle状态-post-toggle-check" class="sidebar-link">检查toggle状态 [POST /toggle/check]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#获取发起操作的用户列表-get-toggle-users" class="sidebar-link">获取发起操作的用户列表 [GET /toggle/users]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#关注或取消关注-post-toggle-follow" class="sidebar-link">关注或取消关注 [POST /toggle/follow]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#喜欢或取消喜欢-post-toggle-like" class="sidebar-link">喜欢或取消喜欢 [POST /toggle/like]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#收藏或取消收藏-post-toggle-mark" class="sidebar-link">收藏或取消收藏 [POST /toggle/mark]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#打赏或取消打赏-post-toggle-reward" class="sidebar-link">打赏或取消打赏 [POST /toggle/reward]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#投票或取消投票-post-toggle-vote" class="sidebar-link">投票或取消投票 [POST /toggle/vote]</a></li><li class="sidebar-sub-header"><a href="/Laputa/api/v1/#举报内容-post-report-send" class="sidebar-link">举报内容 [POST /report/send]</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><p>FORMAT: 1A</p> <h1 id="calibur-tv-api-docs"><a href="#calibur-tv-api-docs" aria-hidden="true" class="header-anchor">#</a> calibur.tv API docs</h1> <h1 id="搜索相关接口"><a href="#搜索相关接口" aria-hidden="true" class="header-anchor">#</a> 搜索相关接口</h1> <h2 id="搜索接口-get-search-new"><a href="#搜索接口-get-search-new" aria-hidden="true" class="header-anchor">#</a> 搜索接口 [GET /search/new]</h2> <blockquote><p>目前支持的参数格式：
type：all, user, bangumi, video，post，role，image，score，question，answer
返回的数据与 flow/list 返回的相同</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 要检测的类型</li> <li>key: (string, required) - 搜索的关键词</li> <li>page: (integer, required) - 搜索的页码</li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;数据列表&quot;
</code></pre></li></ul></li></ul> <h2 id="获取所有番剧列表-get-search-bangumis"><a href="#获取所有番剧列表-get-search-bangumis" aria-hidden="true" class="header-anchor">#</a> 获取所有番剧列表 [GET /search/bangumis]</h2> <blockquote><p>返回所有的番剧列表，用户搜索提示，可以有效减少请求数</p></blockquote> <ul><li>Response 200 (application/json)
<ul><li><p>Body</p> <pre><code>  &quot;番剧列表&quot;
</code></pre></li></ul></li></ul> <h1 id="用户认证相关接口"><a href="#用户认证相关接口" aria-hidden="true" class="header-anchor">#</a> 用户认证相关接口</h1> <h2 id="发送手机验证码-post-door-message"><a href="#发送手机验证码-post-door-message" aria-hidden="true" class="header-anchor">#</a> 发送手机验证码 [POST /door/message]</h2> <blockquote><p>一个通用的接口，通过 <code>type</code> 和 <code>phone_number</code> 发送手机验证码.
目前支持 <code>type</code> 为：</p></blockquote> <ol><li><code>sign_up</code>，注册时调用</li> <li><code>forgot_password</code>，找回密码时使用</li></ol> <blockquote><p>目前返回的数字验证码是<code>6位</code></p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 上面的某种type</li> <li>phone_number: (number, required) - 只支持<code>11位</code>的手机号</li> <li>geetest: (object, required) - Geetest认证对象</li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;短信已发送&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;未经过图形验证码认证&quot;
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40100,
      &quot;message&quot;: &quot;图形验证码认证失败&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;各种错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 503 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 50310,
      &quot;message&quot;: &quot;短信服务暂不可用或请求过于频繁&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户注册-post-door-register"><a href="#用户注册-post-door-register" aria-hidden="true" class="header-anchor">#</a> 用户注册 [POST /door/register]</h2> <p>目前仅支持使用手机号注册</p> <ul><li><p>Parameters</p> <ul><li>access: (number, required) - 手机号</li> <li>secret: (string, required) - <code>6至16位</code>的密码</li> <li>nickname: (string, required) - 昵称，只能包含<code>汉字、数字和字母，2~14个字符组成，1个汉字占2个字符</code></li> <li>authCode: (number, required) - 6位数字的短信验证码</li> <li>inviteCode: (number, optional) - 邀请码</li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;JWT-Token&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;各种错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户登录-post-door-login"><a href="#用户登录-post-door-login" aria-hidden="true" class="header-anchor">#</a> 用户登录 [POST /door/login]</h2> <p>目前仅支持手机号和密码登录</p> <ul><li><p>Parameters</p> <ul><li>access: (number, required) - 手机号</li> <li>secret: (string, required) - 6至16位的密码</li> <li>geetest: (object, required) - Geetest认证对象</li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;JWT-Token&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;未经过图形验证码认证&quot;
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40100,
      &quot;message&quot;: &quot;图形验证码认证失败&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;各种错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户登出-post-door-logout"><a href="#用户登出-post-door-logout" aria-hidden="true" class="header-anchor">#</a> 用户登出 [POST /door/logout]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="获取用户信息-post-door-refresh"><a href="#获取用户信息-post-door-refresh" aria-hidden="true" class="header-anchor">#</a> 获取用户信息 [POST /door/refresh]</h2> <p>每次<code>启动应用</code>、<code>登录</code>、<code>注册</code>成功后调用</p> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;用户对象&quot;
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40104,
      &quot;message&quot;: &quot;未登录的用户&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="重置密码-post-door-reset"><a href="#重置密码-post-door-reset" aria-hidden="true" class="header-anchor">#</a> 重置密码 [POST /door/reset]</h2> <ul><li><p>Parameters</p> <ul><li>access: (number, required) - 手机号</li> <li>secret: (string, required) - 6至16位的密码</li> <li>authCode: (number, required) - 6位数字的短信验证码</li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;密码重置成功&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;未经过图形验证码认证&quot;
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40100,
      &quot;message&quot;: &quot;图形验证码认证失败&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;各种错误&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="app版本检测"><a href="#app版本检测" aria-hidden="true" class="header-anchor">#</a> App版本检测</h1> <h2 id="检测app版本-get-app-version-check"><a href="#检测app版本-get-app-version-check" aria-hidden="true" class="header-anchor">#</a> 检测App版本 [GET /app/version/check]</h2> <blockquote><p>目前支持的type
1：Android
2：iOS</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (integer, required) - 系统类型</li> <li>version: (string, required) - 当前版本</li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;latest_version&quot;: &quot;最新版本号&quot;,
          &quot;force_update&quot;: &quot;当前版本是否需要强制更新&quot;,
          &quot;download_url&quot;: &quot;最新版下载链接&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="番剧相关接口"><a href="#番剧相关接口" aria-hidden="true" class="header-anchor">#</a> 番剧相关接口</h1> <h2 id="番剧时间轴-get-bangumi-timeline"><a href="#番剧时间轴-get-bangumi-timeline" aria-hidden="true" class="header-anchor">#</a> 番剧时间轴 [GET /bangumi/timeline]</h2> <ul><li><p>Parameters</p> <ul><li>year: (integer, required) - 从哪一年开始获取</li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;list&quot;: &quot;番剧列表&quot;,
          &quot;noMore&quot;: &quot;没有更多了&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="新番列表（周）-get-bangumi-released"><a href="#新番列表（周）-get-bangumi-released" aria-hidden="true" class="header-anchor">#</a> 新番列表（周） [GET /bangumi/released]</h2> <ul><li>Response 200 (application/json)
<ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;番剧列表&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="所有的番剧标签-get-bangumi-tags"><a href="#所有的番剧标签-get-bangumi-tags" aria-hidden="true" class="header-anchor">#</a> 所有的番剧标签 [GET /bangumi/tags]</h2> <ul><li>Response 200 (application/json)
<ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;标签列表&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="根据标签获取番剧列表-get-bangumi-category"><a href="#根据标签获取番剧列表-get-bangumi-category" aria-hidden="true" class="header-anchor">#</a> 根据标签获取番剧列表 [GET /bangumi/category]</h2> <ul><li><p>Parameters</p> <ul><li>id: (string, required) - 选中的标签id，<code>用 - 链接的字符串</code></li> <li>page: (integer, required) - 页码
<ul><li>Default: 0</li></ul></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;list&quot;: &quot;番剧列表&quot;,
          &quot;total&quot;: &quot;该标签下番剧的总数&quot;,
          &quot;noMore&quot;: &quot;是否没有更多了&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="番剧详情-get-bangumi-bangumiid-show"><a href="#番剧详情-get-bangumi-bangumiid-show" aria-hidden="true" class="header-anchor">#</a> 番剧详情 [GET /bangumi/<code>bangumiId</code>/show]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;番剧信息&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的番剧&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="番剧视频-get-bangumi-bangumiid-videos"><a href="#番剧视频-get-bangumi-bangumiid-videos" aria-hidden="true" class="header-anchor">#</a> 番剧视频 [GET /bangumi/<code>bangumiId</code>/videos]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;videos&quot;: &quot;视频列表&quot;,
          &quot;has_season&quot;: &quot;是否有多个季度&quot;,
          &quot;total&quot;: &quot;视频总数&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的番剧&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="吧主编辑番剧信息-post-bangumi-bangumiid-edit"><a href="#吧主编辑番剧信息-post-bangumi-bangumiid-edit" aria-hidden="true" class="header-anchor">#</a> 吧主编辑番剧信息 [POST /bangumi/<code>bangumiId</code>/edit]</h2> <ul><li><p>Parameters</p> <ul><li>avatar: (string, required) - 封面图链接，不包含 host</li> <li>banner: (string, required) - 背景图链接，不包含 host</li> <li>summary: (string, required) - 200字以内的纯文本</li> <li>tags: (array, required) - 标签的id数组</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误或内容非法&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 503 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;50301&quot;: 40301,
      &quot;message&quot;: &quot;服务暂不可用&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="帖子相关接口"><a href="#帖子相关接口" aria-hidden="true" class="header-anchor">#</a> 帖子相关接口</h1> <h2 id="新建帖子-post-post-create"><a href="#新建帖子-post-post-create" aria-hidden="true" class="header-anchor">#</a> 新建帖子 [POST /post/create]</h2> <blockquote><p>图片对象示例：</p></blockquote> <ol><li><code>url</code> 七牛传图后得到的 url，不包含图片地址的 host，如一张图片 image.calibur.tv/user/1/avatar.png，七牛返回的 url 是：user/1/avatar.png，将这个 url 传到后端</li> <li><code>width</code> 图片的宽度，七牛上传图片后得到</li> <li><code>height</code> 图片的高度，七牛上传图片后得到</li> <li><code>size</code> 图片的尺寸，七牛上传图片后得到</li> <li><code>type</code> 图片的类型，七牛上传图片后得到</li></ol> <ul><li><p>Parameters</p> <ul><li>bangumiId: (integer, required) - 所选的番剧 id</li> <li>title: (string, required) - 标题<code>40字以内</code></li> <li>desc: (string, required) - content可能是富文本，desc是<code>120字以内的纯文本</code></li> <li>content: (string, required) - 内容，<code>1000字以内</code></li> <li>images: (array, required) - 图片对象数组</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;帖子id&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="帖子详情-get-post-id-show"><a href="#帖子详情-get-post-id-show" aria-hidden="true" class="header-anchor">#</a> 帖子详情 [GET /post/{id}/show]</h2> <ul><li><p>Parameters</p> <ul><li>only: (integer, optional) - 是否只看楼主
<ul><li>Default: 0</li></ul></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;bangumi&quot;: &quot;番剧信息&quot;,
          &quot;user&quot;: &quot;作者信息&quot;,
          &quot;post&quot;: &quot;帖子信息&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;帖子不存在/番剧不存在/作者不存在&quot;
  }
</code></pre></li></ul></li> <li><p>Response 423 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 42301,
      &quot;message&quot;: &quot;内容正在审核中&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="获取番剧页的置顶帖子列表-get-bangumi-id-posts-top"><a href="#获取番剧页的置顶帖子列表-get-bangumi-id-posts-top" aria-hidden="true" class="header-anchor">#</a> 获取番剧页的置顶帖子列表 [GET /bangumi/{id}/posts/top]</h2> <ul><li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;番剧不存在&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;帖子列表&quot;
</code></pre></li></ul></li></ul> <h2 id="删除帖子-post-post-postid-deletepost"><a href="#删除帖子-post-post-postid-deletepost" aria-hidden="true" class="header-anchor">#</a> 删除帖子 [POST /post/<code>postId</code>/deletePost]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40104,
      &quot;message&quot;: &quot;未登录的用户&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的帖子&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="设置帖子加精-post-post-manager-nice-set"><a href="#设置帖子加精-post-post-manager-nice-set" aria-hidden="true" class="header-anchor">#</a> 设置帖子加精 [POST /post/manager/nice/set]</h2> <ul><li><p>Parameters</p> <ul><li>id: (string, required) - 帖子 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;已经是精品贴了&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的帖子&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="撤销帖子加精-post-post-manager-nice-remove"><a href="#撤销帖子加精-post-post-manager-nice-remove" aria-hidden="true" class="header-anchor">#</a> 撤销帖子加精 [POST /post/manager/nice/remove]</h2> <ul><li><p>Parameters</p> <ul><li>id: (string, required) - 帖子 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;不是精品贴&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的帖子&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="撤销帖子置顶-post-post-manager-top-set"><a href="#撤销帖子置顶-post-post-manager-top-set" aria-hidden="true" class="header-anchor">#</a> 撤销帖子置顶 [POST /post/manager/top/set]</h2> <ul><li><p>Parameters</p> <ul><li>id: (string, required) - 帖子 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;超过置顶帖的个数限制（目前是3）&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的帖子&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="撤销帖子置顶-post-post-manager-top-remove"><a href="#撤销帖子置顶-post-post-manager-top-remove" aria-hidden="true" class="header-anchor">#</a> 撤销帖子置顶 [POST /post/manager/top/remove]</h2> <ul><li><p>Parameters</p> <ul><li>id: (string, required) - 帖子 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;不是置顶贴&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的帖子&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="图片相关接口"><a href="#图片相关接口" aria-hidden="true" class="header-anchor">#</a> 图片相关接口</h1> <h2 id="获取首页banner图-get-image-banner"><a href="#获取首页banner图-get-image-banner" aria-hidden="true" class="header-anchor">#</a> 获取首页banner图 [GET /image/banner]</h2> <ul><li>Response 200 (application/json)
<ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;图片列表&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="获取-geetest-验证码-get-image-captcha"><a href="#获取-geetest-验证码-get-image-captcha" aria-hidden="true" class="header-anchor">#</a> 获取 Geetest 验证码 [GET /image/captcha]</h2> <ul><li>Response 200 (application/json)
<ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;success&quot;: &quot;数字0或1&quot;,
          &quot;gt&quot;: &quot;Geetest.gt&quot;,
          &quot;challenge&quot;: &quot;Geetest.challenge&quot;,
          &quot;payload&quot;: &quot;字符串荷载&quot;
      }
  }
</code></pre></li></ul></li></ul> <h2 id="获取图片上传token-get-image-uptoken"><a href="#获取图片上传token-get-image-uptoken" aria-hidden="true" class="header-anchor">#</a> 获取图片上传token [GET /image/uptoken]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;upToken&quot;: &quot;上传图片的token&quot;,
          &quot;expiredAt&quot;: &quot;token过期时的时间戳，单位为s&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40104,
      &quot;message&quot;: &quot;未登录的用户&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="新建相册-post-image-album-create"><a href="#新建相册-post-image-album-create" aria-hidden="true" class="header-anchor">#</a> 新建相册 [POST /image/album/create]</h2> <ul><li><p>Parameters</p> <ul><li>bangumi_id: (integer, required) - 所选的番剧 id</li> <li>name: (string, required) - 相册名称<code>30字以内</code></li> <li>is_cartoon: (boolean, required) - 是不是漫画（只有吧主/管理员才能上传漫画）</li> <li>is_creator: (boolean, required) - 是不是原唱（漫画默认都不是原创）</li> <li>url: (string, required) - 封面图片链接，不包含 host</li> <li>width: (integer, required) - 图片宽度</li> <li>height: (integer, required) - 图片高度</li> <li>size: (string, required) - 图片尺寸</li> <li>type: (string, required) - 图片类型</li> <li>part: (integer, required) - 漫画是第几集，非漫画传0</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;相册对象&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误，或这一集的漫画已存在，或图片非法&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足（漫画）&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="编辑相册-post-image-album-edit"><a href="#编辑相册-post-image-album-edit" aria-hidden="true" class="header-anchor">#</a> 编辑相册 [POST /image/album/edit]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 相册 id</li> <li>name: (string, required) - 相册名称<code>30字以内</code></li> <li>url: (string, required) - 封面图片链接，不包含 host</li> <li>width: (integer, required) - 图片宽度</li> <li>height: (integer, required) - 图片高度</li> <li>size: (string, required) - 图片尺寸</li> <li>type: (string, required) - 图片类型</li> <li>part: (integer, required) - 漫画是第几集，非漫画传0</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;相册对象&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误，或这一集的漫画已存在，或图片非法&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足（漫画）&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="上传单张图片-post-image-single-upload"><a href="#上传单张图片-post-image-single-upload" aria-hidden="true" class="header-anchor">#</a> 上传单张图片 [POST /image/single/upload]</h2> <ul><li><p>Parameters</p> <ul><li>bangumi_id: (integer, required) - 所选的番剧 id</li> <li>name: (string, required) - 相册名称<code>30字以内</code></li> <li>is_creator: (boolean, required) - 是不是原唱（漫画默认都不是原创）</li> <li>url: (string, required) - 封面图片链接，不包含 host</li> <li>width: (integer, required) - 图片宽度</li> <li>height: (integer, required) - 图片高度</li> <li>size: (string, required) - 图片尺寸</li> <li>type: (string, required) - 图片类型</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;新图片 id&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误，或图片非法&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="编辑单张图片-post-image-single-edit"><a href="#编辑单张图片-post-image-single-edit" aria-hidden="true" class="header-anchor">#</a> 编辑单张图片 [POST /image/single/edit]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 图片 id</li> <li>bangumi_id: (integer, required) - 所选的番剧 id</li> <li>name: (string, required) - 相册名称<code>30字以内</code></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误，或图片非法&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="上传相册内图片-post-image-album-upload"><a href="#上传相册内图片-post-image-album-upload" aria-hidden="true" class="header-anchor">#</a> 上传相册内图片 [POST /image/album/upload]</h2> <blockquote><p>图片对象示例：</p></blockquote> <ol><li><code>url</code> 七牛传图后得到的 key，不包含图片地址的 host，如一张图片 https://image.calibur.tv/user/1/avatar.png，七牛返回的 key 是：user/1/avatar.png，将这个 key 传到后端</li> <li><code>width</code> 图片的宽度，七牛上传图片后得到</li> <li><code>height</code> 图片的高度，七牛上传图片后得到</li> <li><code>size</code> 图片的尺寸，七牛上传图片后得到</li> <li><code>type</code> 图片的类型，七牛上传图片后得到</li></ol> <ul><li><p>Parameters</p> <ul><li>album_id: (integer, required) - 相册 id</li> <li>images: (array, required) - 图片对象数组</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;新图片 id&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足，比如不是吧主，却修改漫画&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;相册不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="自己的相册列表-get-image-album-users"><a href="#自己的相册列表-get-image-album-users" aria-hidden="true" class="header-anchor">#</a> 自己的相册列表 [GET /image/album/users]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;相册数组&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="删除某个相册-post-image-album-delete"><a href="#删除某个相册-post-image-album-delete" aria-hidden="true" class="header-anchor">#</a> 删除某个相册 [POST /image/album/delete]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 相册 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;权限不足&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;相册不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="图片详情页-get-image-image-id-show"><a href="#图片详情页-get-image-image-id-show" aria-hidden="true" class="header-anchor">#</a> 图片详情页 [GET /image/${image_id}/show]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;相册页面信息&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;图片不存在&quot;
  }
</code></pre></li></ul></li> <li><p>Response 423 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 42301,
      &quot;message&quot;: &quot;内容正在审核中&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="番剧漫画列表-get-bangumi-bangumi-id-cartoon"><a href="#番剧漫画列表-get-bangumi-bangumi-id-cartoon" aria-hidden="true" class="header-anchor">#</a> 番剧漫画列表 [GET /bangumi/${bangumi_id}/cartoon]</h2> <ul><li><p>Parameters</p> <ul><li>take: (integer, required) - 取的格式
<ul><li>Default: 12</li></ul></li> <li>page: (integer, required) - 页数
<ul><li>Default: 0</li></ul></li> <li>sort: (string, required) - 升降序，desc 或者 asc
<ul><li>Default: desc</li></ul></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;list&quot;: &quot;漫画列表&quot;,
          &quot;total&quot;: &quot;总数&quot;,
          &quot;noMore&quot;: &quot;是否还有更多&quot;
      }
  }
</code></pre></li></ul></li></ul> <h2 id="相册内图片的排序-post-image-album-albumid-sort"><a href="#相册内图片的排序-post-image-album-albumid-sort" aria-hidden="true" class="header-anchor">#</a> 相册内图片的排序 [POST /image/album/<code>albumId</code>/sort]</h2> <ul><li><p>Parameters</p> <ul><li>result: (string, required) - 相册内图片排序后的<code>ids</code>，用<code>,</code>拼接的字符串</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;data&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的相册&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="删除相册里的图片-post-image-album-albumid-deleteimage"><a href="#删除相册里的图片-post-image-album-albumid-deleteimage" aria-hidden="true" class="header-anchor">#</a> 删除相册里的图片 [POST /image/album/<code>albumId</code>/deleteImage]</h2> <ul><li><p>Parameters</p> <ul><li>result: (string, required) - 相册内图片排序后的<code>ids</code>，用<code>,</code>拼接的字符串</li> <li>imageId: (integer, required) - 要删除的图片id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;data&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的相册，或要删除的图片已经被删除&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="视频相关接口"><a href="#视频相关接口" aria-hidden="true" class="header-anchor">#</a> 视频相关接口</h1> <h2 id="获取视频资源-get-video-videoid-show"><a href="#获取视频资源-get-video-videoid-show" aria-hidden="true" class="header-anchor">#</a> 获取视频资源 [GET /video/${videoId}/show]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;info&quot;: &quot;视频对象&quot;,
          &quot;bangumi&quot;: &quot;番剧信息&quot;,
          &quot;list&quot;: {
              &quot;total&quot;: &quot;视频总数&quot;,
              &quot;repeat&quot;: &quot;是否重排&quot;,
              &quot;videos&quot;: &quot;视频列表&quot;
          }
      }
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的视频资源&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="记录视频播放信息-get-video-videoid-playing"><a href="#记录视频播放信息-get-video-videoid-playing" aria-hidden="true" class="header-anchor">#</a> 记录视频播放信息 [GET /video/${videoId}/playing]</h2> <ul><li>Request (application/json)
<ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li></ul> <h1 id="漫评相关接口"><a href="#漫评相关接口" aria-hidden="true" class="header-anchor">#</a> 漫评相关接口</h1> <h2 id="获取漫评详情-get-score-id-show"><a href="#获取漫评详情-get-score-id-show" aria-hidden="true" class="header-anchor">#</a> 获取漫评详情 [GET /score/{id}/show]</h2> <ul><li><p>Response 423 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 42301,
      &quot;message&quot;: &quot;内容正在审核中&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的漫评&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;详情&quot;
</code></pre></li></ul></li></ul> <h2 id="编辑漫评时，根据-id-获取数据-get-score-id-edit"><a href="#编辑漫评时，根据-id-获取数据-get-score-id-edit" aria-hidden="true" class="header-anchor">#</a> 编辑漫评时，根据 id 获取数据 [GET /score/{id}/edit]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的漫评&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;漫评数据&quot;
</code></pre></li></ul></li></ul> <h2 id="获取番剧的漫评总分-post-score-bangumis"><a href="#获取番剧的漫评总分-post-score-bangumis" aria-hidden="true" class="header-anchor">#</a> 获取番剧的漫评总分 [POST /score/bangumis]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 番剧 id</li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;番剧的评分详情&quot;
</code></pre></li></ul></li></ul> <h2 id="获取用户的漫评草稿列表-get-score-drafts"><a href="#获取用户的漫评草稿列表-get-score-drafts" aria-hidden="true" class="header-anchor">#</a> 获取用户的漫评草稿列表 [GET /score/drafts]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;漫评草稿列表&quot;
</code></pre></li></ul></li></ul> <h2 id="创建漫评-post-score-check"><a href="#创建漫评-post-score-check" aria-hidden="true" class="header-anchor">#</a> 创建漫评 [POST /score/check]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 番剧 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;如果是0，就是没评过，否则返回漫评的id&quot;
</code></pre></li></ul></li></ul> <h2 id="创建漫评-post-score-cerate"><a href="#创建漫评-post-score-cerate" aria-hidden="true" class="header-anchor">#</a> 创建漫评 [POST /score/cerate]</h2> <ul><li><p>Parameters</p> <ul><li>title: (string, required) - 标题</li> <li>bangumi_id: (integer, required) - 番剧 id</li> <li>intro: (string, required) - 纯文本简介，120字以内</li> <li>content: (array, required) - JSON-content 的内容</li> <li>lol: (integer, required) - 笑点</li> <li>cry: (integer, required) - 泪点</li> <li>fight: (integer, required) - 燃点</li> <li>moe: (integer, required) - 萌点</li> <li>sound: (integer, required) - 音乐</li> <li>vision: (integer, required) - 画面</li> <li>role: (integer, required) - 人设</li> <li>story: (integer, required) - 情节</li> <li>express: (integer, required) - 内涵</li> <li>style: (integer, required) - 美感</li> <li>do_publish: (boolean, required) - 是否公开发布</li> <li>is_creator: (boolean, required) - 是否是原创内容</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的番剧&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;错误的请求参数|同一个番剧不能重复评价&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="更新漫评-post-score-update"><a href="#更新漫评-post-score-update" aria-hidden="true" class="header-anchor">#</a> 更新漫评 [POST /score/update]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 要更新的漫评 id</li> <li>title: (string, required) - 标题</li> <li>bangumi_id: (integer, required) - 番剧 id</li> <li>intro: (string, required) - 纯文本简介，120字以内</li> <li>content: (array, required) - JSON-content 的内容</li> <li>lol: (integer, required) - 笑点</li> <li>cry: (integer, required) - 泪点</li> <li>fight: (integer, required) - 燃点</li> <li>moe: (integer, required) - 萌点</li> <li>sound: (integer, required) - 音乐</li> <li>vision: (integer, required) - 画面</li> <li>role: (integer, required) - 人设</li> <li>story: (integer, required) - 情节</li> <li>express: (integer, required) - 内涵</li> <li>style: (integer, required) - 美感</li> <li>do_publish: (boolean, required) - 是否公开发布</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的番剧&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;错误的请求参数|同一个番剧不能重复评价&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="删除漫评-post-score-delete"><a href="#删除漫评-post-score-delete" aria-hidden="true" class="header-anchor">#</a> 删除漫评 [POST /score/delete]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 要删除的漫评 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;数据不存在&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h1 id="提问相关接口"><a href="#提问相关接口" aria-hidden="true" class="header-anchor">#</a> 提问相关接口</h1> <h2 id="获取提问详情-get-question-qaq-id-show"><a href="#获取提问详情-get-question-qaq-id-show" aria-hidden="true" class="header-anchor">#</a> 获取提问详情 [GET /question/qaq/{id}/show]</h2> <ul><li><p>Response 423 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 42301,
      &quot;message&quot;: &quot;内容正在审核中&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的漫评&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;详情&quot;
</code></pre></li></ul></li></ul> <h2 id="创建提问-post-question-qaq-cerate"><a href="#创建提问-post-question-qaq-cerate" aria-hidden="true" class="header-anchor">#</a> 创建提问 [POST /question/qaq/cerate]</h2> <ul><li><p>Parameters</p> <ul><li>tags: (array, required) - 番剧的id数字</li> <li>title: (string, required) - 标题</li> <li>images: (array, optional) - 图片列表</li> <li>intro: (string, required) - 纯文本简介，120字</li> <li>content: (string, required) - 正题，1000字以内</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;错误的请求参数&quot;
  }
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;提问的id&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="回答相关接口"><a href="#回答相关接口" aria-hidden="true" class="header-anchor">#</a> 回答相关接口</h1> <h2 id="获取回答详情-get-question-soga-id-show"><a href="#获取回答详情-get-question-soga-id-show" aria-hidden="true" class="header-anchor">#</a> 获取回答详情 [GET /question/soga/{id}/show]</h2> <ul><li><p>Response 423 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 42301,
      &quot;message&quot;: &quot;内容正在审核中&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的漫评&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;详情&quot;
</code></pre></li></ul></li></ul> <h2 id="编辑回答时，根据-id-获取数据-get-question-soga-id-resource"><a href="#编辑回答时，根据-id-获取数据-get-question-soga-id-resource" aria-hidden="true" class="header-anchor">#</a> 编辑回答时，根据 id 获取数据 [GET /question/soga/{id}/resource]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的回答&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;回答数据&quot;
</code></pre></li></ul></li></ul> <h2 id="创建回答-post-question-soga-id-create"><a href="#创建回答-post-question-soga-id-create" aria-hidden="true" class="header-anchor">#</a> 创建回答 [POST /question/soga/{id}/create]</h2> <ul><li><p>Parameters</p> <ul><li>question_id: (integer, required) - 问题的id</li> <li>intro: (string, required) - 纯文本简介，120字以内</li> <li>content: (array, required) - JSON-content 的内容</li> <li>do_publish: (boolean, required) - 是否公开发布</li> <li>source_url: (string, optional) - 内容出处的 url</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的问题&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;不能重复作答&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;回答的id&quot;
</code></pre></li></ul></li></ul> <h2 id="更新自己的回答-post-question-soga-id-update"><a href="#更新自己的回答-post-question-soga-id-update" aria-hidden="true" class="header-anchor">#</a> 更新自己的回答 [POST /question/soga/{id}/update]</h2> <ul><li><p>Parameters</p> <ul><li>intro: (string, required) - 纯文本简介，120字以内</li> <li>content: (array, required) - JSON-content 的内容</li> <li>do_publish: (boolean, required) - 是否公开发布</li> <li>source_url: (string, optional) - 内容出处的 url</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的答案|问题&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40001,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="删除自己的回答-post-question-soga-id-delete"><a href="#删除自己的回答-post-question-soga-id-delete" aria-hidden="true" class="header-anchor">#</a> 删除自己的回答 [POST /question/soga/{id}/delete]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;数据不存在&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有操作权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="获取用户的回答草稿列表-get-question-soga-drafts"><a href="#获取用户的回答草稿列表-get-question-soga-drafts" aria-hidden="true" class="header-anchor">#</a> 获取用户的回答草稿列表 [GET /question/soga/drafts]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;回答草稿列表&quot;
</code></pre></li></ul></li></ul> <h1 id="用户相关接口"><a href="#用户相关接口" aria-hidden="true" class="header-anchor">#</a> 用户相关接口</h1> <h2 id="用户每日签到-post-user-daysign"><a href="#用户每日签到-post-user-daysign" aria-hidden="true" class="header-anchor">#</a> 用户每日签到 [POST /user/daySign]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40104,
      &quot;message&quot;: &quot;未登录的用户&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;今日已签到&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户详情-get-user-zone-show"><a href="#用户详情-get-user-zone-show" aria-hidden="true" class="header-anchor">#</a> 用户详情 [GET /user/<code>zone</code>/show]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;用户信息对象&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;该用户不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="更新用户资料中的图片-post-user-setting-image"><a href="#更新用户资料中的图片-post-user-setting-image" aria-hidden="true" class="header-anchor">#</a> 更新用户资料中的图片 [POST /user/setting/image]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - <code>avatar</code>或<code>banner</code></li> <li>url: (string, required) - 图片地址，不带<code>host</code></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="更新用户资料中文本-post-user-setting-profile"><a href="#更新用户资料中文本-post-user-setting-profile" aria-hidden="true" class="header-anchor">#</a> 更新用户资料中文本 [POST /user/setting/profile]</h2> <blockquote><p>性别对应：
0：未知，1：男，2：女，3：伪娘，4：药娘，5：扶她</p></blockquote> <ul><li><p>Parameters</p> <ul><li>sex: (integer, required) - 性别，必填</li> <li>signature: (string, required) - 用户签名，最多150字</li> <li>nickname: (string, required) - 用户昵称，最多14字符（1个汉字占2个字符）</li> <li>birthday: (number, required) - 用户生日，秒为单位的时间戳</li> <li>birth_secret: (boolean, required) - 生日是否保密</li> <li>sex_secret: (boolean, required) - 性别是否保密</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="用户关注的番剧列表-get-user-zone-followed-bangumi"><a href="#用户关注的番剧列表-get-user-zone-followed-bangumi" aria-hidden="true" class="header-anchor">#</a> 用户关注的番剧列表 [GET /user/<code>zone</code>/followed/bangumi]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;番剧列表&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;该用户不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户回复的帖子列表-get-user-zone-posts-reply"><a href="#用户回复的帖子列表-get-user-zone-posts-reply" aria-hidden="true" class="header-anchor">#</a> 用户回复的帖子列表 [GET /user/<code>zone</code>/posts/reply]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;帖子列表&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;找不到用户&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户反馈-post-user-feedback"><a href="#用户反馈-post-user-feedback" aria-hidden="true" class="header-anchor">#</a> 用户反馈 [POST /user/feedback]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;type&quot;: &quot;反馈的类型&quot;,
      &quot;desc&quot;: &quot;反馈内容，最多120字&quot;,
      &quot;ua&quot;: &quot;用户的设备信息&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户消息列表-get-user-notification-list"><a href="#用户消息列表-get-user-notification-list" aria-hidden="true" class="header-anchor">#</a> 用户消息列表 [GET /user/notification/list]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;minId&quot;: &quot;看过的最小id&quot;
  }
</code></pre></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;消息列表&quot;
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40104,
      &quot;message&quot;: &quot;未登录的用户&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="用户未读消息个数-get-user-notification-count"><a href="#用户未读消息个数-get-user-notification-count" aria-hidden="true" class="header-anchor">#</a> 用户未读消息个数 [GET /user/notification/count]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;未读个数&quot;
  }
</code></pre></li></ul></li> <li><p>Response 401 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40104,
      &quot;message&quot;: &quot;未登录的用户&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="读取某条消息-post-user-notification-read"><a href="#读取某条消息-post-user-notification-read" aria-hidden="true" class="header-anchor">#</a> 读取某条消息 [POST /user/notification/read]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;id&quot;: &quot;消息id&quot;
  }
</code></pre></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h2 id="清空未读消息-post-user-notification-clear"><a href="#清空未读消息-post-user-notification-clear" aria-hidden="true" class="header-anchor">#</a> 清空未读消息 [POST /user/notification/clear]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h1 id="评论相关接口"><a href="#评论相关接口" aria-hidden="true" class="header-anchor">#</a> 评论相关接口</h1> <h2 id="新建主评论-post-comment-main-create"><a href="#新建主评论-post-comment-main-create" aria-hidden="true" class="header-anchor">#</a> 新建主评论 [POST /comment/main/create]</h2> <ul><li><p>Parameters</p> <ul><li>content: (string, required) - 内容，<code>1000字以内</code></li> <li>images: (array, required) - 图片对象数组</li> <li>type: (string, required) - 某个 type</li> <li>id: (integer, required) - 评论主题的 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;主评论对象&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="获取主评论列表-get-comment-main-list"><a href="#获取主评论列表-get-comment-main-list" aria-hidden="true" class="header-anchor">#</a> 获取主评论列表 [GET /comment/main/list]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某个 type</li> <li>id: (integer, required) - 如果是帖子，则是帖子id</li> <li>fetchId: (integer, required) - 你通过这个接口获取的评论列表里最后的那个id
<ul><li>Default: 0</li></ul></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;list&quot;: &quot;主评论列表&quot;,
          &quot;total&quot;: &quot;总数&quot;,
          &quot;noMore&quot;: &quot;没有更多了&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="子评论列表-get-comment-sub-list"><a href="#子评论列表-get-comment-sub-list" aria-hidden="true" class="header-anchor">#</a> 子评论列表 [GET /comment/sub/list]</h2> <blockquote><p>一个通用的接口，通过 <code>type</code> 和 <code>commentId</code> 来获取子评论列表.</p></blockquote> <blockquote><p><code>commentId</code>是父评论的 id：</p></blockquote> <ol><li><code>父评论</code> 一部视频下的评论列表，列表中的每一个就是一个父评论</li> <li><code>子评论</code> 每个父评论都有回复列表，这个回复列表中的每一个就是子评论</li></ol> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某种 type</li> <li>id: (integer, required) - 父评论 id</li> <li>maxId: (integer, required) - 该父评论下看过的最大的子评论 id
<ul><li>Default: 0</li></ul></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;list&quot;: &quot;评论列表&quot;,
          &quot;total&quot;: &quot;评论总数&quot;,
          &quot;noMore&quot;: &quot;没有更多了&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的父评论&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="回复评论-post-comment-main-reply"><a href="#回复评论-post-comment-main-reply" aria-hidden="true" class="header-anchor">#</a> 回复评论 [POST /comment/main/reply]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某种 type</li> <li>id: (integer, required) - 父评论 id</li> <li>targetUserId: (integer, required) - 父评论的用户 id</li> <li>content: (string, required) - 评论内容，<code>纯文本，100字以内</code></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;子评论对象&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;内容已删除&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="删除主评论-post-comment-main-delete"><a href="#删除主评论-post-comment-main-delete" aria-hidden="true" class="header-anchor">#</a> 删除主评论 [POST /comment/main/delete]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某种 type</li> <li>id: (integer, required) - 父评论 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;该评论已被删除&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;继续操作前请先登录&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="喜欢-取消喜欢-主评论-post-comment-main-togglelike"><a href="#喜欢-取消喜欢-主评论-post-comment-main-togglelike" aria-hidden="true" class="header-anchor">#</a> &lt;喜欢/取消喜欢&gt;主评论 [POST /comment/main/toggleLike]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某种 type</li> <li>id: (integer, required) - 父评论 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;是否已喜欢&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="喜欢-取消喜欢-子评论-post-comment-sub-togglelike"><a href="#喜欢-取消喜欢-子评论-post-comment-sub-togglelike" aria-hidden="true" class="header-anchor">#</a> &lt;喜欢/取消喜欢&gt;子评论 [POST /comment/sub/toggleLike]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某种 type</li> <li>id: (integer, required) - 父评论 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;是否已喜欢&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="删除子评论-post-comment-sub-delete"><a href="#删除子评论-post-comment-sub-delete" aria-hidden="true" class="header-anchor">#</a> 删除子评论 [POST /comment/sub/delete]</h2> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 某种 type</li> <li>id: (integer, required) - 子评论 id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;该评论已被删除&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;继续操作前请先登录&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="偶像相关接口"><a href="#偶像相关接口" aria-hidden="true" class="header-anchor">#</a> 偶像相关接口</h1> <h2 id="给角色应援-post-cartoon-role-roleid-star"><a href="#给角色应援-post-cartoon-role-roleid-star" aria-hidden="true" class="header-anchor">#</a> 给角色应援 [POST /cartoon_role/<code>roleId</code>/star]</h2> <ul><li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的角色&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有足够的金币&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="角色的粉丝列表-post-cartoon-role-roleid-fans"><a href="#角色的粉丝列表-post-cartoon-role-roleid-fans" aria-hidden="true" class="header-anchor">#</a> 角色的粉丝列表 [POST /cartoon_role/<code>roleId</code>/fans]</h2> <h2 id="角色详情-get-cartoon-role-roleid-show"><a href="#角色详情-get-cartoon-role-roleid-show" aria-hidden="true" class="header-anchor">#</a> 角色详情 [GET /cartoon_role/<code>roleId</code>/show]</h2> <ul><li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: {
          &quot;bangumi&quot;: &quot;番剧简介&quot;,
          &quot;data&quot;: &quot;角色信息&quot;
      }
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;不存在的角色&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="创建偶像-post-cartoon-role-manager-create"><a href="#创建偶像-post-cartoon-role-manager-create" aria-hidden="true" class="header-anchor">#</a> 创建偶像 [POST /cartoon_role/manager/create]</h2> <ul><li><p>Parameters</p> <ul><li>bangumi_id: (integer, required) - 所选的番剧 id</li> <li>name: (string, required) - 角色名称</li> <li>alias: (string, optional) - 角色别名，逗号分隔的昵称，选填</li> <li>intro: (string, required) - 角色简介，200字以内纯文本</li> <li>avatar: (string, required) - 角色头像，七牛传图返回的url</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 201 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 0,
      &quot;data&quot;: &quot;角色id&quot;
  }
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;角色已存在&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有权限&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="编辑偶像-post-cartoon-role-manager-edit"><a href="#编辑偶像-post-cartoon-role-manager-edit" aria-hidden="true" class="header-anchor">#</a> 编辑偶像 [POST /cartoon_role/manager/edit]</h2> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 角色的id</li> <li>name: (string, required) - 角色名称</li> <li>alias: (string, optional) - 角色别名，逗号分隔的昵称，选填</li> <li>intro: (string, required) - 角色简介，200字以内纯文本</li> <li>avatar: (string, required) - 角色头像，七牛传图返回的url</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;没有权限&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;角色不存在&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="信息流相关接口"><a href="#信息流相关接口" aria-hidden="true" class="header-anchor">#</a> 信息流相关接口</h1> <h2 id="获取信息流列表-get-flow-list"><a href="#获取信息流列表-get-flow-list" aria-hidden="true" class="header-anchor">#</a> 获取信息流列表 [GET /flow/list]</h2> <blockquote><p>调用方法：
如果是请求首页的数据，那么就不传 bangumiId 和 userZone，sort 为 active
如果是请求番剧页的数据，那么就传 bangumiId，sort 为 active
如果是请求用户页的数据，那么就传 userZone，sort 为 news</p></blockquote> <blockquote><p>支持的 type：
post, image, score, role, question, answer</p></blockquote> <blockquote><p>支持的 sort：
news，active，hot</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 哪种类型的数据</li> <li>sort: (string, required) - 排序方法</li> <li>bangumiId: (integer, optional) - 番剧的id</li> <li>userZone: (string, optional) - 用户的空间名</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错误&quot;
  }
</code></pre></li></ul></li> <li><p>Response 204 (application/json)</p></li></ul> <h1 id="用户社交点击相关接口"><a href="#用户社交点击相关接口" aria-hidden="true" class="header-anchor">#</a> 用户社交点击相关接口</h1> <h2 id="检查toggle状态-post-toggle-check"><a href="#检查toggle状态-post-toggle-check" aria-hidden="true" class="header-anchor">#</a> 检查toggle状态 [POST /toggle/check]</h2> <blockquote><p>目前支持的参数格式：
type：like, follow
如果是 type 是 like，modal 支持：post、image、score、answer
如果是 type 是follow，modal 支持：bangumi、question</p></blockquote> <ul><li><p>Parameters</p> <ul><li>modal: (string, required) - 要检测的模型</li> <li>type: (string, required) - 要检测的类型</li> <li>id: (integer, required) - 要检测的id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;一个boolean值&quot;
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="获取发起操作的用户列表-get-toggle-users"><a href="#获取发起操作的用户列表-get-toggle-users" aria-hidden="true" class="header-anchor">#</a> 获取发起操作的用户列表 [GET /toggle/users]</h2> <blockquote><p>目前支持的参数格式：
type：like, follow, reward, mark，contributors
如果是 type 是 [like|reward|mark]，modal 支持：post、image、score、answer
如果是 type 是 follow，modal 支持：bangumi、question
如果是 contributors，modal 支持：bangumi（就是吧主列表），question（修改过问题的人列表）</p></blockquote> <ul><li><p>Parameters</p> <ul><li>modal: (string, required) - 要请求的模型</li> <li>type: (string, required) - 要检测的类型</li> <li>id: (integer, required) - 要请求的id</li> <li>last_id: (integer, required) - 已获取列表里的最后一个 item 的 id
<ul><li>Default: 0</li></ul></li> <li>take: (integer, optional) - 获取的个数
<ul><li>Default: 10</li></ul></li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;一个boolean值&quot;
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="关注或取消关注-post-toggle-follow"><a href="#关注或取消关注-post-toggle-follow" aria-hidden="true" class="header-anchor">#</a> 关注或取消关注 [POST /toggle/follow]</h2> <blockquote><p>目前支持的 type：bangumi，question</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 要请求的类型</li> <li>id: (integer, required) - 要请求的id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;一个boolean值&quot;
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;吧主不能取消关注&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;检测的对象不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="喜欢或取消喜欢-post-toggle-like"><a href="#喜欢或取消喜欢-post-toggle-like" aria-hidden="true" class="header-anchor">#</a> 喜欢或取消喜欢 [POST /toggle/like]</h2> <blockquote><p>目前支持的 type：post、image、score、answer</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 要请求的类型</li> <li>id: (integer, required) - 要请求的id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;一个boolean值&quot;
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40303,
      &quot;message&quot;: &quot;原创内容只能打赏，不能喜欢 | 不能喜欢自己的内容&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;检测的对象不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="收藏或取消收藏-post-toggle-mark"><a href="#收藏或取消收藏-post-toggle-mark" aria-hidden="true" class="header-anchor">#</a> 收藏或取消收藏 [POST /toggle/mark]</h2> <blockquote><p>目前支持的 type：post、image、score、answer、video</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 要请求的类型</li> <li>id: (integer, required) - 要请求的id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;一个boolean值&quot;
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;不能收藏自己的内容&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;检测的对象不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="打赏或取消打赏-post-toggle-reward"><a href="#打赏或取消打赏-post-toggle-reward" aria-hidden="true" class="header-anchor">#</a> 打赏或取消打赏 [POST /toggle/reward]</h2> <blockquote><p>目前支持的 type：post、image、score、answer</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 要请求的类型</li> <li>id: (integer, required) - 要请求的id</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  &quot;一个boolean值&quot;
</code></pre></li></ul></li> <li><p>Response 400 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40003,
      &quot;message&quot;: &quot;请求参数错 | 不支持该类型内容的打赏&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40303,
      &quot;message&quot;: &quot;非原创内容只能喜欢，不能打赏 | 金币不足 | 未打赏过 | 不能打赏自己的内容&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;检测的对象不存在&quot;
  }
</code></pre></li></ul></li></ul> <h2 id="投票或取消投票-post-toggle-vote"><a href="#投票或取消投票-post-toggle-vote" aria-hidden="true" class="header-anchor">#</a> 投票或取消投票 [POST /toggle/vote]</h2> <blockquote><p>目前支持的type： answer
只支持赞同、不赞同两种情况</p></blockquote> <ul><li><p>Parameters</p> <ul><li>type: (string, required) - 要请求的类型</li> <li>id: (integer, required) - 要请求的id</li> <li>is_agree: (boolean, required) - 是赞同</li></ul></li> <li><p>Request (application/json)</p> <ul><li><p>Headers</p> <pre><code>  Authorization: Bearer JWT-Token
</code></pre></li></ul></li> <li><p>Response 200 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;total&quot;: &quot;目前赞的总数&quot;,
      &quot;result&quot;: &quot;自己是赞还是反对，-1代表反对，0代表不反对不赞同，1代表赞同&quot;
  }
</code></pre></li></ul></li> <li><p>Response 403 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40301,
      &quot;message&quot;: &quot;不能赞同自己&quot;
  }
</code></pre></li></ul></li> <li><p>Response 404 (application/json)</p> <ul><li><p>Body</p> <pre><code>  {
      &quot;code&quot;: 40401,
      &quot;message&quot;: &quot;数据不存在&quot;
  }
</code></pre></li></ul></li></ul> <h1 id="举报相关接口"><a href="#举报相关接口" aria-hidden="true" class="header-anchor">#</a> 举报相关接口</h1> <h2 id="举报内容-post-report-send"><a href="#举报内容-post-report-send" aria-hidden="true" class="header-anchor">#</a> 举报内容 [POST /report/send]</h2> <blockquote><p>目前支持的 model：
user,
bangumi,
video,
role,
post,
image,
score,
question,
answer,
post_comment,
image_comment,
score_comment,
video_comment,
question_comment,
answer_comment,
role_comment,
post_reply,
image_reply,
score_reply,
video_reply,
question_reply,
answer_reply,
role_reply</p></blockquote> <blockquote><p>目前支持的 type：
0：其它
1：违法违规
2：色情低俗
3：赌博诈骗
4：人身攻击
5：侵犯隐私
6：内容抄袭
7：垃圾广告
8：恶意引战
9：重复内容/刷屏
10：内容不相关
11：互刷金币</p></blockquote> <ul><li><p>Parameters</p> <ul><li>id: (integer, required) - 举报的 id</li> <li>model: (string, required) - 举报的模型</li> <li>type: (string, required) - 举报的类型</li> <li>message: (string, required) - 举报的留言</li></ul></li> <li><p>Response 204 (application/json)</p></li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Laputa/" class="prev router-link-active">
          首页
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/Laputa/assets/js/15.a88919fa.js" defer></script><script src="/Laputa/assets/js/app.7a57e0d5.js" defer></script>
  </body>
</html>
