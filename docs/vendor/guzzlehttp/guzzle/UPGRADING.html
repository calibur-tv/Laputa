<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hello VuePress</title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="https://static.calibur.tv/favicon.ico">
    
    <link rel="preload" href="Laputa/assets/css/0.styles.21b3d02c.css" as="style"><link rel="preload" href="Laputa/assets/js/app.6f999ec1.js" as="script"><link rel="preload" href="Laputa/assets/js/45.f6149b9c.js" as="script"><link rel="prefetch" href="Laputa/assets/js/127.5d5c2a9e.js"><link rel="prefetch" href="Laputa/assets/js/2.cda51ec0.js"><link rel="prefetch" href="Laputa/assets/js/3.a88ade89.js"><link rel="prefetch" href="Laputa/assets/js/4.f0a47b5a.js"><link rel="prefetch" href="Laputa/assets/js/5.eb4e2f15.js"><link rel="prefetch" href="Laputa/assets/js/6.ae349cfe.js"><link rel="prefetch" href="Laputa/assets/js/7.d8abf350.js"><link rel="prefetch" href="Laputa/assets/js/8.7660bbc3.js"><link rel="prefetch" href="Laputa/assets/js/9.9282dabe.js"><link rel="prefetch" href="Laputa/assets/js/10.ea22ba46.js"><link rel="prefetch" href="Laputa/assets/js/11.ed71705a.js"><link rel="prefetch" href="Laputa/assets/js/12.bab571ae.js"><link rel="prefetch" href="Laputa/assets/js/13.78fc55ea.js"><link rel="prefetch" href="Laputa/assets/js/14.765cca5f.js"><link rel="prefetch" href="Laputa/assets/js/15.7f1ee911.js"><link rel="prefetch" href="Laputa/assets/js/16.1de690fb.js"><link rel="prefetch" href="Laputa/assets/js/17.0c9bcfe7.js"><link rel="prefetch" href="Laputa/assets/js/18.4ea1b5ec.js"><link rel="prefetch" href="Laputa/assets/js/19.8c8f8b57.js"><link rel="prefetch" href="Laputa/assets/js/20.9129a22f.js"><link rel="prefetch" href="Laputa/assets/js/21.b84b104e.js"><link rel="prefetch" href="Laputa/assets/js/22.fe164d26.js"><link rel="prefetch" href="Laputa/assets/js/23.dee79d2c.js"><link rel="prefetch" href="Laputa/assets/js/24.7a76775e.js"><link rel="prefetch" href="Laputa/assets/js/25.57b548b0.js"><link rel="prefetch" href="Laputa/assets/js/26.22bea336.js"><link rel="prefetch" href="Laputa/assets/js/27.f372908a.js"><link rel="prefetch" href="Laputa/assets/js/28.7c33523e.js"><link rel="prefetch" href="Laputa/assets/js/29.0b631070.js"><link rel="prefetch" href="Laputa/assets/js/30.fde1b56c.js"><link rel="prefetch" href="Laputa/assets/js/31.19440d0b.js"><link rel="prefetch" href="Laputa/assets/js/32.09c05419.js"><link rel="prefetch" href="Laputa/assets/js/33.f24b2fa1.js"><link rel="prefetch" href="Laputa/assets/js/34.704234d2.js"><link rel="prefetch" href="Laputa/assets/js/35.3538aa16.js"><link rel="prefetch" href="Laputa/assets/js/36.9fd936b8.js"><link rel="prefetch" href="Laputa/assets/js/37.029a950c.js"><link rel="prefetch" href="Laputa/assets/js/38.ca2d406b.js"><link rel="prefetch" href="Laputa/assets/js/39.6d640b65.js"><link rel="prefetch" href="Laputa/assets/js/40.da4aa4d2.js"><link rel="prefetch" href="Laputa/assets/js/41.15815f6e.js"><link rel="prefetch" href="Laputa/assets/js/42.87b4655d.js"><link rel="prefetch" href="Laputa/assets/js/43.87956add.js"><link rel="prefetch" href="Laputa/assets/js/44.ed836e06.js"><link rel="prefetch" href="Laputa/assets/js/46.57e569c9.js"><link rel="prefetch" href="Laputa/assets/js/47.53bc0ff4.js"><link rel="prefetch" href="Laputa/assets/js/48.e16402f6.js"><link rel="prefetch" href="Laputa/assets/js/49.ef4b9870.js"><link rel="prefetch" href="Laputa/assets/js/50.97b2795a.js"><link rel="prefetch" href="Laputa/assets/js/51.1df1f3d1.js"><link rel="prefetch" href="Laputa/assets/js/52.727e7778.js"><link rel="prefetch" href="Laputa/assets/js/53.f8356a1e.js"><link rel="prefetch" href="Laputa/assets/js/54.8f15ada1.js"><link rel="prefetch" href="Laputa/assets/js/55.fc41623e.js"><link rel="prefetch" href="Laputa/assets/js/56.b65567d0.js"><link rel="prefetch" href="Laputa/assets/js/57.3cb52983.js"><link rel="prefetch" href="Laputa/assets/js/58.ff69625f.js"><link rel="prefetch" href="Laputa/assets/js/59.b99f5762.js"><link rel="prefetch" href="Laputa/assets/js/60.b7c53f3f.js"><link rel="prefetch" href="Laputa/assets/js/61.2757576d.js"><link rel="prefetch" href="Laputa/assets/js/62.5d25765e.js"><link rel="prefetch" href="Laputa/assets/js/63.a6b7406e.js"><link rel="prefetch" href="Laputa/assets/js/64.7bba8fd1.js"><link rel="prefetch" href="Laputa/assets/js/65.6e593ebf.js"><link rel="prefetch" href="Laputa/assets/js/66.b926ddd2.js"><link rel="prefetch" href="Laputa/assets/js/67.c8c69cd3.js"><link rel="prefetch" href="Laputa/assets/js/68.cb4bb5cb.js"><link rel="prefetch" href="Laputa/assets/js/69.a7b09174.js"><link rel="prefetch" href="Laputa/assets/js/70.02c49833.js"><link rel="prefetch" href="Laputa/assets/js/71.1c53c636.js"><link rel="prefetch" href="Laputa/assets/js/72.bb0f586e.js"><link rel="prefetch" href="Laputa/assets/js/73.aa250a71.js"><link rel="prefetch" href="Laputa/assets/js/74.fcd8312b.js"><link rel="prefetch" href="Laputa/assets/js/75.ee561d5e.js"><link rel="prefetch" href="Laputa/assets/js/76.8d6c7d11.js"><link rel="prefetch" href="Laputa/assets/js/77.3c5c7747.js"><link rel="prefetch" href="Laputa/assets/js/78.0afb8d36.js"><link rel="prefetch" href="Laputa/assets/js/79.e09176dc.js"><link rel="prefetch" href="Laputa/assets/js/80.6add3555.js"><link rel="prefetch" href="Laputa/assets/js/81.46dfeac8.js"><link rel="prefetch" href="Laputa/assets/js/82.8c7bae69.js"><link rel="prefetch" href="Laputa/assets/js/83.3c1031f4.js"><link rel="prefetch" href="Laputa/assets/js/84.5414c057.js"><link rel="prefetch" href="Laputa/assets/js/85.434414f7.js"><link rel="prefetch" href="Laputa/assets/js/86.032ff5b5.js"><link rel="prefetch" href="Laputa/assets/js/87.1387e175.js"><link rel="prefetch" href="Laputa/assets/js/88.ef068175.js"><link rel="prefetch" href="Laputa/assets/js/89.3c86a439.js"><link rel="prefetch" href="Laputa/assets/js/90.7b4ceab8.js"><link rel="prefetch" href="Laputa/assets/js/91.993029ce.js"><link rel="prefetch" href="Laputa/assets/js/92.cd0f0552.js"><link rel="prefetch" href="Laputa/assets/js/93.2ea5e4ed.js"><link rel="prefetch" href="Laputa/assets/js/94.d77f771e.js"><link rel="prefetch" href="Laputa/assets/js/95.bfb1166d.js"><link rel="prefetch" href="Laputa/assets/js/96.d656aebb.js"><link rel="prefetch" href="Laputa/assets/js/97.8d318516.js"><link rel="prefetch" href="Laputa/assets/js/98.836a48cc.js"><link rel="prefetch" href="Laputa/assets/js/99.90560d29.js"><link rel="prefetch" href="Laputa/assets/js/100.a889b1b9.js"><link rel="prefetch" href="Laputa/assets/js/101.92c2d09f.js"><link rel="prefetch" href="Laputa/assets/js/102.41e8fe4c.js"><link rel="prefetch" href="Laputa/assets/js/103.1e7ebc3c.js"><link rel="prefetch" href="Laputa/assets/js/104.9b5e097e.js"><link rel="prefetch" href="Laputa/assets/js/105.664970bd.js"><link rel="prefetch" href="Laputa/assets/js/106.61b9108e.js"><link rel="prefetch" href="Laputa/assets/js/107.fffe8d0f.js"><link rel="prefetch" href="Laputa/assets/js/108.6ab1e942.js"><link rel="prefetch" href="Laputa/assets/js/109.df13f020.js"><link rel="prefetch" href="Laputa/assets/js/110.3ee4fa68.js"><link rel="prefetch" href="Laputa/assets/js/111.b836e8af.js"><link rel="prefetch" href="Laputa/assets/js/112.a83b7d02.js"><link rel="prefetch" href="Laputa/assets/js/113.ded87a86.js"><link rel="prefetch" href="Laputa/assets/js/114.297ad3a1.js"><link rel="prefetch" href="Laputa/assets/js/115.544749de.js"><link rel="prefetch" href="Laputa/assets/js/116.a8d4b51b.js"><link rel="prefetch" href="Laputa/assets/js/117.4f44196d.js"><link rel="prefetch" href="Laputa/assets/js/118.89df9a9d.js"><link rel="prefetch" href="Laputa/assets/js/119.2dba598a.js"><link rel="prefetch" href="Laputa/assets/js/120.fc3b4984.js"><link rel="prefetch" href="Laputa/assets/js/121.9fdd6483.js"><link rel="prefetch" href="Laputa/assets/js/122.b56010ca.js"><link rel="prefetch" href="Laputa/assets/js/123.41518099.js"><link rel="prefetch" href="Laputa/assets/js/124.2353c219.js"><link rel="prefetch" href="Laputa/assets/js/125.16055535.js"><link rel="prefetch" href="Laputa/assets/js/126.9edc34c6.js"><link rel="prefetch" href="Laputa/assets/js/128.483176b9.js"><link rel="prefetch" href="Laputa/assets/js/129.d0a84feb.js"><link rel="prefetch" href="Laputa/assets/js/130.e8a23474.js"><link rel="prefetch" href="Laputa/assets/js/131.46723320.js"><link rel="prefetch" href="Laputa/assets/js/132.a9d65b65.js"><link rel="prefetch" href="Laputa/assets/js/133.565a1e84.js"><link rel="prefetch" href="Laputa/assets/js/134.9a13e04e.js"><link rel="prefetch" href="Laputa/assets/js/135.c29729f1.js"><link rel="prefetch" href="Laputa/assets/js/136.1e528d9b.js"><link rel="prefetch" href="Laputa/assets/js/137.ae8b404d.js"><link rel="prefetch" href="Laputa/assets/js/138.be0e6cbb.js"><link rel="prefetch" href="Laputa/assets/js/139.237416e3.js"><link rel="prefetch" href="Laputa/assets/js/140.4ab9ca1a.js"><link rel="prefetch" href="Laputa/assets/js/141.74e2f092.js"><link rel="prefetch" href="Laputa/assets/js/142.0ecb3a43.js"><link rel="prefetch" href="Laputa/assets/js/143.be6d4143.js"><link rel="prefetch" href="Laputa/assets/js/144.1985fb6e.js"><link rel="prefetch" href="Laputa/assets/js/145.37a16214.js"><link rel="prefetch" href="Laputa/assets/js/146.3b54b80d.js"><link rel="prefetch" href="Laputa/assets/js/147.cd7a75ec.js"><link rel="prefetch" href="Laputa/assets/js/148.c069a727.js"><link rel="prefetch" href="Laputa/assets/js/149.31e9b53c.js"><link rel="prefetch" href="Laputa/assets/js/150.97670c74.js"><link rel="prefetch" href="Laputa/assets/js/151.ea21f131.js"><link rel="prefetch" href="Laputa/assets/js/152.7fb53639.js"><link rel="prefetch" href="Laputa/assets/js/153.fc1a3224.js"><link rel="prefetch" href="Laputa/assets/js/154.d139b199.js"><link rel="prefetch" href="Laputa/assets/js/155.d8803711.js"><link rel="prefetch" href="Laputa/assets/js/156.b5f75d9b.js"><link rel="prefetch" href="Laputa/assets/js/157.534cff67.js"><link rel="prefetch" href="Laputa/assets/js/158.507711d4.js"><link rel="prefetch" href="Laputa/assets/js/159.bbe8196f.js"><link rel="prefetch" href="Laputa/assets/js/160.01a377d7.js"><link rel="prefetch" href="Laputa/assets/js/161.df7bc156.js"><link rel="prefetch" href="Laputa/assets/js/162.4c050e9a.js"><link rel="prefetch" href="Laputa/assets/js/163.f633cfe3.js"><link rel="prefetch" href="Laputa/assets/js/164.9a7cde98.js"><link rel="prefetch" href="Laputa/assets/js/165.8383c6e0.js"><link rel="prefetch" href="Laputa/assets/js/166.84973e7b.js"><link rel="prefetch" href="Laputa/assets/js/167.139a83e5.js"><link rel="prefetch" href="Laputa/assets/js/168.b0d2bd4d.js"><link rel="prefetch" href="Laputa/assets/js/169.e800feb9.js"><link rel="prefetch" href="Laputa/assets/js/170.f9451e36.js"><link rel="prefetch" href="Laputa/assets/js/171.a83a4665.js"><link rel="prefetch" href="Laputa/assets/js/172.c211eed7.js"><link rel="prefetch" href="Laputa/assets/js/173.c3a50a74.js"><link rel="prefetch" href="Laputa/assets/js/174.eb3ff294.js"><link rel="prefetch" href="Laputa/assets/js/175.710a54ce.js"><link rel="prefetch" href="Laputa/assets/js/176.b8b0c286.js"><link rel="prefetch" href="Laputa/assets/js/177.53f441fa.js"><link rel="prefetch" href="Laputa/assets/js/178.81400b25.js"><link rel="prefetch" href="Laputa/assets/js/179.8d7755c9.js"><link rel="prefetch" href="Laputa/assets/js/180.cb1b319d.js"><link rel="prefetch" href="Laputa/assets/js/181.897fd3aa.js"><link rel="prefetch" href="Laputa/assets/js/182.5bbea4a6.js"><link rel="prefetch" href="Laputa/assets/js/183.59d5d5b7.js"><link rel="prefetch" href="Laputa/assets/js/184.7a6514a7.js"><link rel="prefetch" href="Laputa/assets/js/185.26dd8cdd.js"><link rel="prefetch" href="Laputa/assets/js/186.978c4dde.js"><link rel="prefetch" href="Laputa/assets/js/187.2ee204e3.js"><link rel="prefetch" href="Laputa/assets/js/188.29baaca4.js"><link rel="prefetch" href="Laputa/assets/js/189.fe643f03.js"><link rel="prefetch" href="Laputa/assets/js/190.dd3ce693.js"><link rel="prefetch" href="Laputa/assets/js/191.c9ffbdf3.js"><link rel="prefetch" href="Laputa/assets/js/192.402577fb.js"><link rel="prefetch" href="Laputa/assets/js/193.4278458a.js"><link rel="prefetch" href="Laputa/assets/js/194.26c0a999.js"><link rel="prefetch" href="Laputa/assets/js/195.b3bbd6f1.js"><link rel="prefetch" href="Laputa/assets/js/196.ec2775a6.js"><link rel="prefetch" href="Laputa/assets/js/197.7a1de435.js"><link rel="prefetch" href="Laputa/assets/js/198.b0d0b4b2.js"><link rel="prefetch" href="Laputa/assets/js/199.68e2f133.js"><link rel="prefetch" href="Laputa/assets/js/200.ac303e12.js"><link rel="prefetch" href="Laputa/assets/js/201.629c56c3.js"><link rel="prefetch" href="Laputa/assets/js/202.f8efe17e.js"><link rel="prefetch" href="Laputa/assets/js/203.24648560.js"><link rel="prefetch" href="Laputa/assets/js/204.413e0508.js"><link rel="prefetch" href="Laputa/assets/js/205.a575ce92.js"><link rel="prefetch" href="Laputa/assets/js/206.7c9b685e.js"><link rel="prefetch" href="Laputa/assets/js/207.1ab88c98.js"><link rel="prefetch" href="Laputa/assets/js/208.351562e6.js"><link rel="prefetch" href="Laputa/assets/js/209.1b054dd4.js"><link rel="prefetch" href="Laputa/assets/js/210.1e8ec36f.js"><link rel="prefetch" href="Laputa/assets/js/211.bd920edf.js"><link rel="prefetch" href="Laputa/assets/js/212.ebc1bea5.js"><link rel="prefetch" href="Laputa/assets/js/213.353cd010.js"><link rel="prefetch" href="Laputa/assets/js/214.4833f3e1.js"><link rel="prefetch" href="Laputa/assets/js/215.1946cb78.js"><link rel="prefetch" href="Laputa/assets/js/216.26c1e1d5.js"><link rel="prefetch" href="Laputa/assets/js/217.ba12abbd.js"><link rel="prefetch" href="Laputa/assets/js/218.4e7296f1.js"><link rel="prefetch" href="Laputa/assets/js/219.529550de.js"><link rel="prefetch" href="Laputa/assets/js/220.b8021d90.js"><link rel="prefetch" href="Laputa/assets/js/221.802a3551.js"><link rel="prefetch" href="Laputa/assets/js/222.bc0d810e.js"><link rel="prefetch" href="Laputa/assets/js/223.8cdfb2ab.js"><link rel="prefetch" href="Laputa/assets/js/224.7c4d2af9.js"><link rel="prefetch" href="Laputa/assets/js/225.3ee841fd.js"><link rel="prefetch" href="Laputa/assets/js/226.7df98d80.js"><link rel="prefetch" href="Laputa/assets/js/227.f8cf7429.js"><link rel="prefetch" href="Laputa/assets/js/228.1bbe3cd5.js"><link rel="prefetch" href="Laputa/assets/js/229.9255cc40.js"><link rel="prefetch" href="Laputa/assets/js/230.9fe34f11.js"><link rel="prefetch" href="Laputa/assets/js/231.4162b6b5.js"><link rel="prefetch" href="Laputa/assets/js/232.49ddd09a.js"><link rel="prefetch" href="Laputa/assets/js/233.7a3b967d.js"><link rel="prefetch" href="Laputa/assets/js/234.7df4ccbc.js"><link rel="prefetch" href="Laputa/assets/js/235.8439e9f2.js"><link rel="prefetch" href="Laputa/assets/js/236.3bec368c.js"><link rel="prefetch" href="Laputa/assets/js/237.159a831f.js"><link rel="prefetch" href="Laputa/assets/js/238.67f44d76.js"><link rel="prefetch" href="Laputa/assets/js/239.34b19aa7.js"><link rel="prefetch" href="Laputa/assets/js/240.cbcf457d.js"><link rel="prefetch" href="Laputa/assets/js/241.58c5bf48.js"><link rel="prefetch" href="Laputa/assets/js/242.23600eb9.js"><link rel="prefetch" href="Laputa/assets/js/243.7ed95623.js"><link rel="prefetch" href="Laputa/assets/js/244.ff6b7298.js"><link rel="prefetch" href="Laputa/assets/js/245.9cf038e8.js"><link rel="prefetch" href="Laputa/assets/js/246.fa1277bb.js"><link rel="prefetch" href="Laputa/assets/js/247.11fee991.js"><link rel="prefetch" href="Laputa/assets/js/248.3655e1e1.js"><link rel="prefetch" href="Laputa/assets/js/249.8fbd4f7c.js"><link rel="prefetch" href="Laputa/assets/js/250.85d161fa.js"><link rel="prefetch" href="Laputa/assets/js/251.481032de.js"><link rel="prefetch" href="Laputa/assets/js/252.6157489d.js"><link rel="prefetch" href="Laputa/assets/js/253.f91926ff.js"><link rel="prefetch" href="Laputa/assets/js/254.b7fad364.js"><link rel="prefetch" href="Laputa/assets/js/255.73dc5cad.js"><link rel="prefetch" href="Laputa/assets/js/256.6b658f8a.js">
    <link rel="stylesheet" href="Laputa/assets/css/0.styles.21b3d02c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Laputa/" class="home-link router-link-active"><!----> <span class="site-name">Hello VuePress</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="guzzle-upgrade-guide"><a href="#guzzle-upgrade-guide" aria-hidden="true" class="header-anchor">#</a> Guzzle Upgrade Guide</h1> <h2 id="_5-0-to-6-0"><a href="#_5-0-to-6-0" aria-hidden="true" class="header-anchor">#</a> 5.0 to 6.0</h2> <p>Guzzle now uses <a href="http://www.php-fig.org/psr/psr-7/" target="_blank" rel="noopener noreferrer">PSR-7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for HTTP messages.
Due to the fact that these messages are immutable, this prompted a refactoring
of Guzzle to use a middleware based system rather than an event system. Any
HTTP message interaction (e.g., <code>GuzzleHttp\Message\Request</code>) need to be
updated to work with the new immutable PSR-7 request and response objects. Any
event listeners or subscribers need to be updated to become middleware
functions that wrap handlers (or are injected into a
<code>GuzzleHttp\HandlerStack</code>).</p> <ul><li>Removed <code>GuzzleHttp\BatchResults</code></li> <li>Removed <code>GuzzleHttp\Collection</code></li> <li>Removed <code>GuzzleHttp\HasDataTrait</code></li> <li>Removed <code>GuzzleHttp\ToArrayInterface</code></li> <li>The <code>guzzlehttp/streams</code> dependency has been removed. Stream functionality
is now present in the <code>GuzzleHttp\Psr7</code> namespace provided by the
<code>guzzlehttp/psr7</code> package.</li> <li>Guzzle no longer uses ReactPHP promises and now uses the
<code>guzzlehttp/promises</code> library. We use a custom promise library for three
significant reasons:
<ol><li>React promises (at the time of writing this) are recursive. Promise
chaining and promise resolution will eventually blow the stack. Guzzle
promises are not recursive as they use a sort of trampolining technique.
Note: there has been movement in the React project to modify promises to
no longer utilize recursion.</li> <li>Guzzle needs to have the ability to synchronously block on a promise to
wait for a result. Guzzle promises allows this functionality (and does
not require the use of recursion).</li> <li>Because we need to be able to wait on a result, doing so using React
promises requires wrapping react promises with RingPHP futures. This
overhead is no longer needed, reducing stack sizes, reducing complexity,
and improving performance.</li></ol></li> <li><code>GuzzleHttp\Mimetypes</code> has been moved to a function in
<code>GuzzleHttp\Psr7\mimetype_from_extension</code> and
<code>GuzzleHttp\Psr7\mimetype_from_filename</code>.</li> <li><code>GuzzleHttp\Query</code> and <code>GuzzleHttp\QueryParser</code> have been removed. Query
strings must now be passed into request objects as strings, or provided to
the <code>query</code> request option when creating requests with clients. The <code>query</code>
option uses PHP's <code>http_build_query</code> to convert an array to a string. If you
need a different serialization technique, you will need to pass the query
string in as a string. There are a couple helper functions that will make
working with query strings easier: <code>GuzzleHttp\Psr7\parse_query</code> and
<code>GuzzleHttp\Psr7\build_query</code>.</li> <li>Guzzle no longer has a dependency on RingPHP. Due to the use of a middleware
system based on PSR-7, using RingPHP and it's middleware system as well adds
more complexity than the benefits it provides. All HTTP handlers that were
present in RingPHP have been modified to work directly with PSR-7 messages
and placed in the <code>GuzzleHttp\Handler</code> namespace. This significantly reduces
complexity in Guzzle, removes a dependency, and improves performance. RingPHP
will be maintained for Guzzle 5 support, but will no longer be a part of
Guzzle 6.</li> <li>As Guzzle now uses a middleware based systems the event system and RingPHP
integration has been removed. Note: while the event system has been removed,
it is possible to add your own type of event system that is powered by the
middleware system.
<ul><li>Removed the <code>Event</code> namespace.</li> <li>Removed the <code>Subscriber</code> namespace.</li> <li>Removed <code>Transaction</code> class</li> <li>Removed <code>RequestFsm</code></li> <li>Removed <code>RingBridge</code></li> <li><code>GuzzleHttp\Subscriber\Cookie</code> is now provided by
<code>GuzzleHttp\Middleware::cookies</code></li> <li><code>GuzzleHttp\Subscriber\HttpError</code> is now provided by
<code>GuzzleHttp\Middleware::httpError</code></li> <li><code>GuzzleHttp\Subscriber\History</code> is now provided by
<code>GuzzleHttp\Middleware::history</code></li> <li><code>GuzzleHttp\Subscriber\Mock</code> is now provided by
<code>GuzzleHttp\Handler\MockHandler</code></li> <li><code>GuzzleHttp\Subscriber\Prepare</code> is now provided by
<code>GuzzleHttp\PrepareBodyMiddleware</code></li> <li><code>GuzzleHttp\Subscriber\Redirect</code> is now provided by
<code>GuzzleHttp\RedirectMiddleware</code></li></ul></li> <li>Guzzle now uses <code>Psr\Http\Message\UriInterface</code> (implements in
<code>GuzzleHttp\Psr7\Uri</code>) for URI support. <code>GuzzleHttp\Url</code> is now gone.</li> <li>Static functions in <code>GuzzleHttp\Utils</code> have been moved to namespaced
functions under the <code>GuzzleHttp</code> namespace. This requires either a Composer
based autoloader or you to include functions.php.</li> <li><code>GuzzleHttp\ClientInterface::getDefaultOption</code> has been renamed to
<code>GuzzleHttp\ClientInterface::getConfig</code>.</li> <li><code>GuzzleHttp\ClientInterface::setDefaultOption</code> has been removed.</li> <li>The <code>json</code> and <code>xml</code> methods of response objects has been removed. With the
migration to strictly adhering to PSR-7 as the interface for Guzzle messages,
adding methods to message interfaces would actually require Guzzle messages
to extend from PSR-7 messages rather then work with them directly.</li></ul> <h2 id="migrating-to-middleware"><a href="#migrating-to-middleware" aria-hidden="true" class="header-anchor">#</a> Migrating to middleware</h2> <p>The change to PSR-7 unfortunately required significant refactoring to Guzzle
due to the fact that PSR-7 messages are immutable. Guzzle 5 relied on an event
system from plugins. The event system relied on mutability of HTTP messages and
side effects in order to work. With immutable messages, you have to change your
workflow to become more about either returning a value (e.g., functional
middlewares) or setting a value on an object. Guzzle v6 has chosen the
functional middleware approach.</p> <p>Instead of using the event system to listen for things like the <code>before</code> event,
you now create a stack based middleware function that intercepts a request on
the way in and the promise of the response on the way out. This is a much
simpler and more predictable approach than the event system and works nicely
with PSR-7 middleware. Due to the use of promises, the middleware system is
also asynchronous.</p> <p>v5:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">GuzzleHttp<span class="token punctuation">\</span>Event<span class="token punctuation">\</span>BeforeEvent</span><span class="token punctuation">;</span>
<span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuzzleHttp<span class="token punctuation">\</span>Client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the emitter and listen to the before event.</span>
<span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'before'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>BeforeEvent <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Guzzle v5 events relied on mutation</span>
    <span class="token variable">$e</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'X-Foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>v6:</p> <p>In v6, you can modify the request before it is sent using the <code>mapRequest</code>
middleware. The idiomatic way in v6 to modify the request/response lifecycle is
to setup a handler middleware stack up front and inject the handler into a
client.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">GuzzleHttp<span class="token punctuation">\</span>Middleware</span><span class="token punctuation">;</span>
<span class="token comment">// Create a handler stack that has all of the default middlewares attached</span>
<span class="token variable">$handler</span> <span class="token operator">=</span> GuzzleHttp\<span class="token package">HandlerStack</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Push the handler onto the handler stack</span>
<span class="token variable">$handler</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push</span><span class="token punctuation">(</span>Middleware<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">mapRequest</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>RequestInterface <span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Notice that we have to return a request object</span>
    <span class="token keyword">return</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withHeader</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'X-Foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Inject the handler into the client</span>
<span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuzzleHttp<span class="token punctuation">\</span>Client</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'handler'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$handler</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="post-requests"><a href="#post-requests" aria-hidden="true" class="header-anchor">#</a> POST Requests</h2> <p>This version added the <a href="http://guzzle.readthedocs.org/en/latest/request-options.html#form_params" target="_blank" rel="noopener noreferrer"><code>form_params</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
and <code>multipart</code> request options. <code>form_params</code> is an associative array of
strings or array of strings and is used to serialize an
<code>application/x-www-form-urlencoded</code> POST request. The
<a href="http://guzzle.readthedocs.org/en/latest/request-options.html#multipart" target="_blank" rel="noopener noreferrer"><code>multipart</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
option is now used to send a multipart/form-data POST request.</p> <p><code>GuzzleHttp\Post\PostFile</code> has been removed. Use the <code>multipart</code> option to add
POST files to a multipart/form-data request.</p> <p>The <code>body</code> option no longer accepts an array to send POST requests. Please use
<code>multipart</code> or <code>form_params</code> instead.</p> <p>The <code>base_url</code> option has been renamed to <code>base_uri</code>.</p> <h2 id="_4-x-to-5-0"><a href="#_4-x-to-5-0" aria-hidden="true" class="header-anchor">#</a> 4.x to 5.0</h2> <h2 id="rewritten-adapter-layer"><a href="#rewritten-adapter-layer" aria-hidden="true" class="header-anchor">#</a> Rewritten Adapter Layer</h2> <p>Guzzle now uses <a href="http://ringphp.readthedocs.org/en/latest" target="_blank" rel="noopener noreferrer">RingPHP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to send
HTTP requests. The <code>adapter</code> option in a <code>GuzzleHttp\Client</code> constructor
is still supported, but it has now been renamed to <code>handler</code>. Instead of
passing a <code>GuzzleHttp\Adapter\AdapterInterface</code>, you must now pass a PHP
<code>callable</code> that follows the RingPHP specification.</p> <h2 id="removed-fluent-interfaces"><a href="#removed-fluent-interfaces" aria-hidden="true" class="header-anchor">#</a> Removed Fluent Interfaces</h2> <p><a href="http://ocramius.github.io/blog/fluent-interfaces-are-evil" target="_blank" rel="noopener noreferrer">Fluent interfaces were removed<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
from the following classes:</p> <ul><li><code>GuzzleHttp\Collection</code></li> <li><code>GuzzleHttp\Url</code></li> <li><code>GuzzleHttp\Query</code></li> <li><code>GuzzleHttp\Post\PostBody</code></li> <li><code>GuzzleHttp\Cookie\SetCookie</code></li></ul> <h2 id="removed-functions-php"><a href="#removed-functions-php" aria-hidden="true" class="header-anchor">#</a> Removed functions.php</h2> <p>Removed &quot;functions.php&quot;, so that Guzzle is truly PSR-4 compliant. The following
functions can be used as replacements.</p> <ul><li><code>GuzzleHttp\json_decode</code> -&gt; <code>GuzzleHttp\Utils::jsonDecode</code></li> <li><code>GuzzleHttp\get_path</code> -&gt; <code>GuzzleHttp\Utils::getPath</code></li> <li><code>GuzzleHttp\Utils::setPath</code> -&gt; <code>GuzzleHttp\set_path</code></li> <li><code>GuzzleHttp\Pool::batch</code> -&gt; <code>GuzzleHttp\batch</code>. This function is, however,
deprecated in favor of using <code>GuzzleHttp\Pool::batch()</code>.</li></ul> <p>The &quot;procedural&quot; global client has been removed with no replacement (e.g.,
<code>GuzzleHttp\get()</code>, <code>GuzzleHttp\post()</code>, etc.). Use a <code>GuzzleHttp\Client</code>
object as a replacement.</p> <h2 id="throwimmediately-has-been-removed"><a href="#throwimmediately-has-been-removed" aria-hidden="true" class="header-anchor">#</a> <code>throwImmediately</code> has been removed</h2> <p>The concept of &quot;throwImmediately&quot; has been removed from exceptions and error
events. This control mechanism was used to stop a transfer of concurrent
requests from completing. This can now be handled by throwing the exception or
by cancelling a pool of requests or each outstanding future request
individually.</p> <h2 id="headers-event-has-been-removed"><a href="#headers-event-has-been-removed" aria-hidden="true" class="header-anchor">#</a> headers event has been removed</h2> <p>Removed the &quot;headers&quot; event. This event was only useful for changing the
body a response once the headers of the response were known. You can implement
a similar behavior in a number of ways. One example might be to use a
FnStream that has access to the transaction being sent. For example, when the
first byte is written, you could check if the response headers match your
expectations, and if so, change the actual stream body that is being
written to.</p> <h2 id="updates-to-http-messages"><a href="#updates-to-http-messages" aria-hidden="true" class="header-anchor">#</a> Updates to HTTP Messages</h2> <p>Removed the <code>asArray</code> parameter from
<code>GuzzleHttp\Message\MessageInterface::getHeader</code>. If you want to get a header
value as an array, then use the newly added <code>getHeaderAsArray()</code> method of
<code>MessageInterface</code>. This change makes the Guzzle interfaces compatible with
the PSR-7 interfaces.</p> <h2 id="_3-x-to-4-0"><a href="#_3-x-to-4-0" aria-hidden="true" class="header-anchor">#</a> 3.x to 4.0</h2> <h2 id="overarching-changes"><a href="#overarching-changes" aria-hidden="true" class="header-anchor">#</a> Overarching changes:</h2> <ul><li>Now requires PHP 5.4 or greater.</li> <li>No longer requires cURL to send requests.</li> <li>Guzzle no longer wraps every exception it throws. Only exceptions that are
recoverable are now wrapped by Guzzle.</li> <li>Various namespaces have been removed or renamed.</li> <li>No longer requiring the Symfony EventDispatcher. A custom event dispatcher
based on the Symfony EventDispatcher is
now utilized in <code>GuzzleHttp\Event\EmitterInterface</code> (resulting in significant
speed and functionality improvements).</li></ul> <p>Changes per Guzzle 3.x namespace are described below.</p> <h2 id="batch"><a href="#batch" aria-hidden="true" class="header-anchor">#</a> Batch</h2> <p>The <code>Guzzle\Batch</code> namespace has been removed. This is best left to
third-parties to implement on top of Guzzle's core HTTP library.</p> <h2 id="cache"><a href="#cache" aria-hidden="true" class="header-anchor">#</a> Cache</h2> <p>The <code>Guzzle\Cache</code> namespace has been removed. (Todo: No suitable replacement
has been implemented yet, but hoping to utilize a PSR cache interface).</p> <h2 id="common"><a href="#common" aria-hidden="true" class="header-anchor">#</a> Common</h2> <ul><li>Removed all of the wrapped exceptions. It's better to use the standard PHP
library for unrecoverable exceptions.</li> <li><code>FromConfigInterface</code> has been removed.</li> <li><code>Guzzle\Common\Version</code> has been removed. The VERSION constant can be found
at <code>GuzzleHttp\ClientInterface::VERSION</code>.</li></ul> <h3 id="collection"><a href="#collection" aria-hidden="true" class="header-anchor">#</a> Collection</h3> <ul><li><code>getAll</code> has been removed. Use <code>toArray</code> to convert a collection to an array.</li> <li><code>inject</code> has been removed.</li> <li><code>keySearch</code> has been removed.</li> <li><code>getPath</code> no longer supports wildcard expressions. Use something better like
JMESPath for this.</li> <li><code>setPath</code> now supports appending to an existing array via the <code>[]</code> notation.</li></ul> <h3 id="events"><a href="#events" aria-hidden="true" class="header-anchor">#</a> Events</h3> <p>Guzzle no longer requires Symfony's EventDispatcher component. Guzzle now uses
<code>GuzzleHttp\Event\Emitter</code>.</p> <ul><li><code>Symfony\Component\EventDispatcher\EventDispatcherInterface</code> is replaced by
<code>GuzzleHttp\Event\EmitterInterface</code>.</li> <li><code>Symfony\Component\EventDispatcher\EventDispatcher</code> is replaced by
<code>GuzzleHttp\Event\Emitter</code>.</li> <li><code>Symfony\Component\EventDispatcher\Event</code> is replaced by
<code>GuzzleHttp\Event\Event</code>, and Guzzle now has an EventInterface in
<code>GuzzleHttp\Event\EventInterface</code>.</li> <li><code>AbstractHasDispatcher</code> has moved to a trait, <code>HasEmitterTrait</code>, and
<code>HasDispatcherInterface</code> has moved to <code>HasEmitterInterface</code>. Retrieving the
event emitter of a request, client, etc. now uses the <code>getEmitter</code> method
rather than the <code>getDispatcher</code> method.</li></ul> <h4 id="emitter"><a href="#emitter" aria-hidden="true" class="header-anchor">#</a> Emitter</h4> <ul><li>Use the <code>once()</code> method to add a listener that automatically removes itself
the first time it is invoked.</li> <li>Use the <code>listeners()</code> method to retrieve a list of event listeners rather than
the <code>getListeners()</code> method.</li> <li>Use <code>emit()</code> instead of <code>dispatch()</code> to emit an event from an emitter.</li> <li>Use <code>attach()</code> instead of <code>addSubscriber()</code> and <code>detach()</code> instead of
<code>removeSubscriber()</code>.</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$mock</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3.x</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEventDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token variable">$mock</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEventDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">removeSubscriber</span><span class="token punctuation">(</span><span class="token variable">$mock</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4.x</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$mock</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token variable">$mock</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use the <code>on()</code> method to add a listener rather than the <code>addListener()</code> method.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 3.x</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEventDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Event <span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4.x</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Event <span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="http"><a href="#http" aria-hidden="true" class="header-anchor">#</a> Http</h2> <h3 id="general-changes"><a href="#general-changes" aria-hidden="true" class="header-anchor">#</a> General changes</h3> <ul><li>The cacert.pem certificate has been moved to <code>src/cacert.pem</code>.</li> <li>Added the concept of adapters that are used to transfer requests over the
wire.</li> <li>Simplified the event system.</li> <li>Sending requests in parallel is still possible, but batching is no longer a
concept of the HTTP layer. Instead, you must use the <code>complete</code> and <code>error</code>
events to asynchronously manage parallel request transfers.</li> <li><code>Guzzle\Http\Url</code> has moved to <code>GuzzleHttp\Url</code>.</li> <li><code>Guzzle\Http\QueryString</code> has moved to <code>GuzzleHttp\Query</code>.</li> <li>QueryAggregators have been rewritten so that they are simply callable
functions.</li> <li><code>GuzzleHttp\StaticClient</code> has been removed. Use the functions provided in
<code>functions.php</code> for an easy to use static client instance.</li> <li>Exceptions in <code>GuzzleHttp\Exception</code> have been updated to all extend from
<code>GuzzleHttp\Exception\TransferException</code>.</li></ul> <h3 id="client"><a href="#client" aria-hidden="true" class="header-anchor">#</a> Client</h3> <p>Calling methods like <code>get()</code>, <code>post()</code>, <code>head()</code>, etc. no longer create and
return a request, but rather creates a request, sends the request, and returns
the response.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 3.0</span>
<span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.0</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or, to mirror the previous behavior</span>
<span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createRequest</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'GET'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>GuzzleHttp\ClientInterface</code> has changed.</p> <ul><li>The <code>send</code> method no longer accepts more than one request. Use <code>sendAll</code> to
send multiple requests in parallel.</li> <li><code>setUserAgent()</code> has been removed. Use a default request option instead. You
could, for example, do something like:
<code>$client-&gt;setConfig('defaults/headers/User-Agent', 'Foo/Bar ' . $client::getDefaultUserAgent())</code>.</li> <li><code>setSslVerification()</code> has been removed. Use default request options instead,
like <code>$client-&gt;setConfig('defaults/verify', true)</code>.</li></ul> <p><code>GuzzleHttp\Client</code> has changed.</p> <ul><li>The constructor now accepts only an associative array. You can include a
<code>base_url</code> string or array to use a URI template as the base URL of a client.
You can also specify a <code>defaults</code> key that is an associative array of default
request options. You can pass an <code>adapter</code> to use a custom adapter,
<code>batch_adapter</code> to use a custom adapter for sending requests in parallel, or
a <code>message_factory</code> to change the factory used to create HTTP requests and
responses.</li> <li>The client no longer emits a <code>client.create_request</code> event.</li> <li>Creating requests with a client no longer automatically utilize a URI
template. You must pass an array into a creational method (e.g.,
<code>createRequest</code>, <code>get</code>, <code>put</code>, etc.) in order to expand a URI template.</li></ul> <h3 id="messages"><a href="#messages" aria-hidden="true" class="header-anchor">#</a> Messages</h3> <p>Messages no longer have references to their counterparts (i.e., a request no
longer has a reference to it's response, and a response no loger has a
reference to its request). This association is now managed through a
<code>GuzzleHttp\Adapter\TransactionInterface</code> object. You can get references to
these transaction objects using request events that are emitted over the
lifecycle of a request.</p> <h4 id="requests-with-a-body"><a href="#requests-with-a-body" aria-hidden="true" class="header-anchor">#</a> Requests with a body</h4> <ul><li><code>GuzzleHttp\Message\EntityEnclosingRequest</code> and
<code>GuzzleHttp\Message\EntityEnclosingRequestInterface</code> have been removed. The
separation between requests that contain a body and requests that do not
contain a body has been removed, and now <code>GuzzleHttp\Message\RequestInterface</code>
handles both use cases.</li> <li>Any method that previously accepts a <code>GuzzleHttp\Response</code> object now accept a
<code>GuzzleHttp\Message\ResponseInterface</code>.</li> <li><code>GuzzleHttp\Message\RequestFactoryInterface</code> has been renamed to
<code>GuzzleHttp\Message\MessageFactoryInterface</code>. This interface is used to create
both requests and responses and is implemented in
<code>GuzzleHttp\Message\MessageFactory</code>.</li> <li>POST field and file methods have been removed from the request object. You
must now use the methods made available to <code>GuzzleHttp\Post\PostBodyInterface</code>
to control the format of a POST body. Requests that are created using a
standard <code>GuzzleHttp\Message\MessageFactoryInterface</code> will automatically use
a <code>GuzzleHttp\Post\PostBody</code> body if the body was passed as an array or if
the method is POST and no body is provided.</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createRequest</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'POST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setField</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addFile</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PostFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file_key'</span><span class="token punctuation">,</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/content'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="headers"><a href="#headers" aria-hidden="true" class="header-anchor">#</a> Headers</h4> <ul><li><code>GuzzleHttp\Message\Header</code> has been removed. Header values are now simply
represented by an array of values or as a string. Header values are returned
as a string by default when retrieving a header value from a message. You can
pass an optional argument of <code>true</code> to retrieve a header value as an array
of strings instead of a single concatenated string.</li> <li><code>GuzzleHttp\PostFile</code> and <code>GuzzleHttp\PostFileInterface</code> have been moved to
<code>GuzzleHttp\Post</code>. This interface has been simplified and now allows the
addition of arbitrary headers.</li> <li>Custom headers like <code>GuzzleHttp\Message\Header\Link</code> have been removed. Most
of the custom headers are now handled separately in specific
subscribers/plugins, and <code>GuzzleHttp\Message\HeaderValues::parseParams()</code> has
been updated to properly handle headers that contain parameters (like the
<code>Link</code> header).</li></ul> <h4 id="responses"><a href="#responses" aria-hidden="true" class="header-anchor">#</a> Responses</h4> <ul><li><code>GuzzleHttp\Message\Response::getInfo()</code> and
<code>GuzzleHttp\Message\Response::setInfo()</code> have been removed. Use the event
system to retrieve this type of information.</li> <li><code>GuzzleHttp\Message\Response::getRawHeaders()</code> has been removed.</li> <li><code>GuzzleHttp\Message\Response::getMessage()</code> has been removed.</li> <li><code>GuzzleHttp\Message\Response::calculateAge()</code> and other cache specific
methods have moved to the CacheSubscriber.</li> <li>Header specific helper functions like <code>getContentMd5()</code> have been removed.
Just use <code>getHeader('Content-MD5')</code> instead.</li> <li><code>GuzzleHttp\Message\Response::setRequest()</code> and
<code>GuzzleHttp\Message\Response::getRequest()</code> have been removed. Use the event
system to work with request and response objects as a transaction.</li> <li><code>GuzzleHttp\Message\Response::getRedirectCount()</code> has been removed. Use the
Redirect subscriber instead.</li> <li><code>GuzzleHttp\Message\Response::isSuccessful()</code> and other related methods have
been removed. Use <code>getStatusCode()</code> instead.</li></ul> <h4 id="streaming-responses"><a href="#streaming-responses" aria-hidden="true" class="header-anchor">#</a> Streaming responses</h4> <p>Streaming requests can now be created by a client directly, returning a
<code>GuzzleHttp\Message\ResponseInterface</code> object that contains a body stream
referencing an open PHP HTTP stream.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 3.0</span>
<span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Stream<span class="token punctuation">\</span>PhpStreamRequestFactory</span><span class="token punctuation">;</span>
<span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$factory</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PhpStreamRequestFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stream</span> <span class="token operator">=</span> <span class="token variable">$factory</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">fromRequest</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$stream</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.0</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'stream'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Read some data off of the stream in the response body</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="redirects"><a href="#redirects" aria-hidden="true" class="header-anchor">#</a> Redirects</h4> <p>The <code>configureRedirects()</code> method has been removed in favor of a
<code>allow_redirects</code> request option.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Standard redirects with a default of a max of 5 redirects</span>
<span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createRequest</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'GET'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'allow_redirects'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Strict redirects with a custom number of redirects</span>
<span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createRequest</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'GET'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'allow_redirects'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'max'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'strict'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="entitybody"><a href="#entitybody" aria-hidden="true" class="header-anchor">#</a> EntityBody</h4> <p>EntityBody interfaces and classes have been removed or moved to
<code>GuzzleHttp\Stream</code>. All classes and interfaces that once required
<code>GuzzleHttp\EntityBodyInterface</code> now require
<code>GuzzleHttp\Stream\StreamInterface</code>. Creating a new body for a request no
longer uses <code>GuzzleHttp\EntityBody::factory</code> but now uses
<code>GuzzleHttp\Stream\Stream::factory</code> or even better:
<code>GuzzleHttp\Stream\create()</code>.</p> <ul><li><code>Guzzle\Http\EntityBodyInterface</code> is now <code>GuzzleHttp\Stream\StreamInterface</code></li> <li><code>Guzzle\Http\EntityBody</code> is now <code>GuzzleHttp\Stream\Stream</code></li> <li><code>Guzzle\Http\CachingEntityBody</code> is now <code>GuzzleHttp\Stream\CachingStream</code></li> <li><code>Guzzle\Http\ReadLimitEntityBody</code> is now <code>GuzzleHttp\Stream\LimitStream</code></li> <li><code>Guzzle\Http\IoEmittyinEntityBody</code> has been removed.</li></ul> <h4 id="request-lifecycle-events"><a href="#request-lifecycle-events" aria-hidden="true" class="header-anchor">#</a> Request lifecycle events</h4> <p>Requests previously submitted a large number of requests. The number of events
emitted over the lifecycle of a request has been significantly reduced to make
it easier to understand how to extend the behavior of a request. All events
emitted during the lifecycle of a request now emit a custom
<code>GuzzleHttp\Event\EventInterface</code> object that contains context providing
methods and a way in which to modify the transaction at that specific point in
time (e.g., intercept the request and set a response on the transaction).</p> <ul><li><code>request.before_send</code> has been renamed to <code>before</code> and now emits a
<code>GuzzleHttp\Event\BeforeEvent</code></li> <li><code>request.complete</code> has been renamed to <code>complete</code> and now emits a
<code>GuzzleHttp\Event\CompleteEvent</code>.</li> <li><code>request.sent</code> has been removed. Use <code>complete</code>.</li> <li><code>request.success</code> has been removed. Use <code>complete</code>.</li> <li><code>error</code> is now an event that emits a <code>GuzzleHttp\Event\ErrorEvent</code>.</li> <li><code>request.exception</code> has been removed. Use <code>error</code>.</li> <li><code>request.receive.status_line</code> has been removed.</li> <li><code>curl.callback.progress</code> has been removed. Use a custom <code>StreamInterface</code> to
maintain a status update.</li> <li><code>curl.callback.write</code> has been removed. Use a custom <code>StreamInterface</code> to
intercept writes.</li> <li><code>curl.callback.read</code> has been removed. Use a custom <code>StreamInterface</code> to
intercept reads.</li></ul> <p><code>headers</code> is a new event that is emitted after the response headers of a
request have been received before the body of the response is downloaded. This
event emits a <code>GuzzleHttp\Event\HeadersEvent</code>.</p> <p>You can intercept a request and inject a response using the <code>intercept()</code> event
of a <code>GuzzleHttp\Event\BeforeEvent</code>, <code>GuzzleHttp\Event\CompleteEvent</code>, and
<code>GuzzleHttp\Event\ErrorEvent</code> event.</p> <p>See: http://docs.guzzlephp.org/en/latest/events.html</p> <h2 id="inflection"><a href="#inflection" aria-hidden="true" class="header-anchor">#</a> Inflection</h2> <p>The <code>Guzzle\Inflection</code> namespace has been removed. This is not a core concern
of Guzzle.</p> <h2 id="iterator"><a href="#iterator" aria-hidden="true" class="header-anchor">#</a> Iterator</h2> <p>The <code>Guzzle\Iterator</code> namespace has been removed.</p> <ul><li><code>Guzzle\Iterator\AppendIterator</code>, <code>Guzzle\Iterator\ChunkedIterator</code>, and
<code>Guzzle\Iterator\MethodProxyIterator</code> are nice, but not a core requirement of
Guzzle itself.</li> <li><code>Guzzle\Iterator\FilterIterator</code> is no longer needed because an equivalent
class is shipped with PHP 5.4.</li> <li><code>Guzzle\Iterator\MapIterator</code> is not really needed when using PHP 5.5 because
it's easier to just wrap an iterator in a generator that maps values.</li></ul> <p>For a replacement of these iterators, see https://github.com/nikic/iter</p> <h2 id="log"><a href="#log" aria-hidden="true" class="header-anchor">#</a> Log</h2> <p>The LogPlugin has moved to https://github.com/guzzle/log-subscriber. The
<code>Guzzle\Log</code> namespace has been removed. Guzzle now relies on
<code>Psr\Log\LoggerInterface</code> for all logging. The MessageFormatter class has been
moved to <code>GuzzleHttp\Subscriber\Log\Formatter</code>.</p> <h2 id="parser"><a href="#parser" aria-hidden="true" class="header-anchor">#</a> Parser</h2> <p>The <code>Guzzle\Parser</code> namespace has been removed. This was previously used to
make it possible to plug in custom parsers for cookies, messages, URI
templates, and URLs; however, this level of complexity is not needed in Guzzle
so it has been removed.</p> <ul><li>Cookie: Cookie parsing logic has been moved to
<code>GuzzleHttp\Cookie\SetCookie::fromString</code>.</li> <li>Message: Message parsing logic for both requests and responses has been moved
to <code>GuzzleHttp\Message\MessageFactory::fromMessage</code>. Message parsing is only
used in debugging or deserializing messages, so it doesn't make sense for
Guzzle as a library to add this level of complexity to parsing messages.</li> <li>UriTemplate: URI template parsing has been moved to
<code>GuzzleHttp\UriTemplate</code>. The Guzzle library will automatically use the PECL
URI template library if it is installed.</li> <li>Url: URL parsing is now performed in <code>GuzzleHttp\Url::fromString</code> (previously
it was <code>Guzzle\Http\Url::factory()</code>). If custom URL parsing is necessary,
then developers are free to subclass <code>GuzzleHttp\Url</code>.</li></ul> <h2 id="plugin"><a href="#plugin" aria-hidden="true" class="header-anchor">#</a> Plugin</h2> <p>The <code>Guzzle\Plugin</code> namespace has been renamed to <code>GuzzleHttp\Subscriber</code>.
Several plugins are shipping with the core Guzzle library under this namespace.</p> <ul><li><code>GuzzleHttp\Subscriber\Cookie</code>: Replaces the old CookiePlugin. Cookie jar
code has moved to <code>GuzzleHttp\Cookie</code>.</li> <li><code>GuzzleHttp\Subscriber\History</code>: Replaces the old HistoryPlugin.</li> <li><code>GuzzleHttp\Subscriber\HttpError</code>: Throws errors when a bad HTTP response is
received.</li> <li><code>GuzzleHttp\Subscriber\Mock</code>: Replaces the old MockPlugin.</li> <li><code>GuzzleHttp\Subscriber\Prepare</code>: Prepares the body of a request just before
sending. This subscriber is attached to all requests by default.</li> <li><code>GuzzleHttp\Subscriber\Redirect</code>: Replaces the RedirectPlugin.</li></ul> <p>The following plugins have been removed (third-parties are free to re-implement
these if needed):</p> <ul><li><code>GuzzleHttp\Plugin\Async</code> has been removed.</li> <li><code>GuzzleHttp\Plugin\CurlAuth</code> has been removed.</li> <li><code>GuzzleHttp\Plugin\ErrorResponse\ErrorResponsePlugin</code> has been removed. This
functionality should instead be implemented with event listeners that occur
after normal response parsing occurs in the guzzle/command package.</li></ul> <p>The following plugins are not part of the core Guzzle package, but are provided
in separate repositories:</p> <ul><li><code>Guzzle\Http\Plugin\BackoffPlugin</code> has been rewritten to be much simpler
to build custom retry policies using simple functions rather than various
chained classes. See: https://github.com/guzzle/retry-subscriber</li> <li><code>Guzzle\Http\Plugin\Cache\CachePlugin</code> has moved to
https://github.com/guzzle/cache-subscriber</li> <li><code>Guzzle\Http\Plugin\Log\LogPlugin</code> has moved to
https://github.com/guzzle/log-subscriber</li> <li><code>Guzzle\Http\Plugin\Md5\Md5Plugin</code> has moved to
https://github.com/guzzle/message-integrity-subscriber</li> <li><code>Guzzle\Http\Plugin\Mock\MockPlugin</code> has moved to
<code>GuzzleHttp\Subscriber\MockSubscriber</code>.</li> <li><code>Guzzle\Http\Plugin\Oauth\OauthPlugin</code> has moved to
https://github.com/guzzle/oauth-subscriber</li></ul> <h2 id="service"><a href="#service" aria-hidden="true" class="header-anchor">#</a> Service</h2> <p>The service description layer of Guzzle has moved into two separate packages:</p> <ul><li>http://github.com/guzzle/command Provides a high level abstraction over web
services by representing web service operations using commands.</li> <li>http://github.com/guzzle/guzzle-services Provides an implementation of
guzzle/command that provides request serialization and response parsing using
Guzzle service descriptions.</li></ul> <h2 id="stream"><a href="#stream" aria-hidden="true" class="header-anchor">#</a> Stream</h2> <p>Stream have moved to a separate package available at
https://github.com/guzzle/streams.</p> <p><code>Guzzle\Stream\StreamInterface</code> has been given a large update to cleanly take
on the responsibilities of <code>Guzzle\Http\EntityBody</code> and
<code>Guzzle\Http\EntityBodyInterface</code> now that they have been removed. The number
of methods implemented by the <code>StreamInterface</code> has been drastically reduced to
allow developers to more easily extend and decorate stream behavior.</p> <h2 id="removed-methods-from-streaminterface"><a href="#removed-methods-from-streaminterface" aria-hidden="true" class="header-anchor">#</a> Removed methods from StreamInterface</h2> <ul><li><code>getStream</code> and <code>setStream</code> have been removed to better encapsulate streams.</li> <li><code>getMetadata</code> and <code>setMetadata</code> have been removed in favor of
<code>GuzzleHttp\Stream\MetadataStreamInterface</code>.</li> <li><code>getWrapper</code>, <code>getWrapperData</code>, <code>getStreamType</code>, and <code>getUri</code> have all been
removed. This data is accessible when
using streams that implement <code>GuzzleHttp\Stream\MetadataStreamInterface</code>.</li> <li><code>rewind</code> has been removed. Use <code>seek(0)</code> for a similar behavior.</li></ul> <h2 id="renamed-methods"><a href="#renamed-methods" aria-hidden="true" class="header-anchor">#</a> Renamed methods</h2> <ul><li><code>detachStream</code> has been renamed to <code>detach</code>.</li> <li><code>feof</code> has been renamed to <code>eof</code>.</li> <li><code>ftell</code> has been renamed to <code>tell</code>.</li> <li><code>readLine</code> has moved from an instance method to a static class method of
<code>GuzzleHttp\Stream\Stream</code>.</li></ul> <h2 id="metadata-streams"><a href="#metadata-streams" aria-hidden="true" class="header-anchor">#</a> Metadata streams</h2> <p><code>GuzzleHttp\Stream\MetadataStreamInterface</code> has been added to denote streams
that contain additional metadata accessible via <code>getMetadata()</code>.
<code>GuzzleHttp\Stream\StreamInterface::getMetadata</code> and
<code>GuzzleHttp\Stream\StreamInterface::setMetadata</code> have been removed.</p> <h2 id="streamrequestfactory"><a href="#streamrequestfactory" aria-hidden="true" class="header-anchor">#</a> StreamRequestFactory</h2> <p>The entire concept of the StreamRequestFactory has been removed. The way this
was used in Guzzle 3 broke the actual interface of sending streaming requests
(instead of getting back a Response, you got a StreamInterface). Streaming
PHP requests are now implemented through the <code>GuzzleHttp\Adapter\StreamAdapter</code>.</p> <h2 id="_3-6-to-3-7"><a href="#_3-6-to-3-7" aria-hidden="true" class="header-anchor">#</a> 3.6 to 3.7</h2> <h3 id="deprecations"><a href="#deprecations" aria-hidden="true" class="header-anchor">#</a> Deprecations</h3> <ul><li>You can now enable E_USER_DEPRECATED warnings to see if you are using any deprecated methods.:</li></ul> <div class="language-php extra-class"><pre class="language-php"><code>\<span class="token package">Guzzle<span class="token punctuation">\</span>Common<span class="token punctuation">\</span>Version</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable">$emitWarnings</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>The following APIs and options have been marked as deprecated:</p> <ul><li>Marked <code>Guzzle\Http\Message\Request::isResponseBodyRepeatable()</code> as deprecated. Use <code>$request-&gt;getResponseBody()-&gt;isRepeatable()</code> instead.</li> <li>Marked <code>Guzzle\Http\Message\Request::canCache()</code> as deprecated. Use <code>Guzzle\Plugin\Cache\DefaultCanCacheStrategy-&gt;canCacheRequest()</code> instead.</li> <li>Marked <code>Guzzle\Http\Message\Request::canCache()</code> as deprecated. Use <code>Guzzle\Plugin\Cache\DefaultCanCacheStrategy-&gt;canCacheRequest()</code> instead.</li> <li>Marked <code>Guzzle\Http\Message\Request::setIsRedirect()</code> as deprecated. Use the HistoryPlugin instead.</li> <li>Marked <code>Guzzle\Http\Message\Request::isRedirect()</code> as deprecated. Use the HistoryPlugin instead.</li> <li>Marked <code>Guzzle\Cache\CacheAdapterFactory::factory()</code> as deprecated</li> <li>Marked <code>Guzzle\Service\Client::enableMagicMethods()</code> as deprecated. Magic methods can no longer be disabled on a Guzzle\Service\Client.</li> <li>Marked <code>Guzzle\Parser\Url\UrlParser</code> as deprecated. Just use PHP's <code>parse_url()</code> and percent encode your UTF-8.</li> <li>Marked <code>Guzzle\Common\Collection::inject()</code> as deprecated.</li> <li>Marked <code>Guzzle\Plugin\CurlAuth\CurlAuthPlugin</code> as deprecated. Use
<code>$client-&gt;getConfig()-&gt;setPath('request.options/auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));</code> or
<code>$client-&gt;setDefaultOption('auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));</code></li></ul> <p>3.7 introduces <code>request.options</code> as a parameter for a client configuration and as an optional argument to all creational
request methods. When paired with a client's configuration settings, these options allow you to specify default settings
for various aspects of a request. Because these options make other previous configuration options redundant, several
configuration options and methods of a client and AbstractCommand have been deprecated.</p> <ul><li><p>Marked <code>Guzzle\Service\Client::getDefaultHeaders()</code> as deprecated. Use <code>$client-&gt;getDefaultOption('headers')</code>.</p></li> <li><p>Marked <code>Guzzle\Service\Client::setDefaultHeaders()</code> as deprecated. Use <code>$client-&gt;setDefaultOption('headers/{header_name}', 'value')</code>.</p></li> <li><p>Marked 'request.params' for <code>Guzzle\Http\Client</code> as deprecated. Use <code>$client-&gt;setDefaultOption('params/{param_name}', 'value')</code></p></li> <li><p>Marked 'command.headers', 'command.response_body' and 'command.on_complete' as deprecated for AbstractCommand. These will work through Guzzle 4.0</p> <pre><code>  $command = $client-&gt;getCommand('foo', array(
      'command.headers' =&gt; array('Test' =&gt; '123'),
      'command.response_body' =&gt; '/path/to/file'
  ));

  // Should be changed to:

  $command = $client-&gt;getCommand('foo', array(
      'command.request_options' =&gt; array(
          'headers' =&gt; array('Test' =&gt; '123'),
          'save_as' =&gt; '/path/to/file'
      )
  ));
</code></pre></li></ul> <h3 id="interface-changes"><a href="#interface-changes" aria-hidden="true" class="header-anchor">#</a> Interface changes</h3> <p>Additions and changes (you will need to update any implementations or subclasses you may have created):</p> <ul><li>Added an <code>$options</code> argument to the end of the following methods of <code>Guzzle\Http\ClientInterface</code>:
createRequest, head, delete, put, patch, post, options, prepareRequest</li> <li>Added an <code>$options</code> argument to the end of <code>Guzzle\Http\Message\Request\RequestFactoryInterface::createRequest()</code></li> <li>Added an <code>applyOptions()</code> method to <code>Guzzle\Http\Message\Request\RequestFactoryInterface</code></li> <li>Changed <code>Guzzle\Http\ClientInterface::get($uri = null, $headers = null, $body = null)</code> to
<code>Guzzle\Http\ClientInterface::get($uri = null, $headers = null, $options = array())</code>. You can still pass in a
resource, string, or EntityBody into the $options parameter to specify the download location of the response.</li> <li>Changed <code>Guzzle\Common\Collection::__construct($data)</code> to no longer accepts a null value for <code>$data</code> but a
default <code>array()</code></li> <li>Added <code>Guzzle\Stream\StreamInterface::isRepeatable</code></li> <li>Made <code>Guzzle\Http\Client::expandTemplate</code> and <code>getUriTemplate</code> protected methods.</li></ul> <p>The following methods were removed from interfaces. All of these methods are still available in the concrete classes
that implement them, but you should update your code to use alternative methods:</p> <ul><li>Removed <code>Guzzle\Http\ClientInterface::setDefaultHeaders(). Use</code>$client-&gt;getConfig()-&gt;setPath('request.options/headers/{header_name}', 'value')<code>. or</code>$client-&gt;getConfig()-&gt;setPath('request.options/headers', array('header_name' =&gt; 'value'))<code>or</code>$client-&gt;setDefaultOption('headers/{header_name}', 'value')<code>. or</code>$client-&gt;setDefaultOption('headers', array('header_name' =&gt; 'value'))`.</li> <li>Removed <code>Guzzle\Http\ClientInterface::getDefaultHeaders(). Use</code>$client-&gt;getConfig()-&gt;getPath('request.options/headers')`.</li> <li>Removed <code>Guzzle\Http\ClientInterface::expandTemplate()</code>. This is an implementation detail.</li> <li>Removed <code>Guzzle\Http\ClientInterface::setRequestFactory()</code>. This is an implementation detail.</li> <li>Removed <code>Guzzle\Http\ClientInterface::getCurlMulti()</code>. This is a very specific implementation detail.</li> <li>Removed <code>Guzzle\Http\Message\RequestInterface::canCache</code>. Use the CachePlugin.</li> <li>Removed <code>Guzzle\Http\Message\RequestInterface::setIsRedirect</code>. Use the HistoryPlugin.</li> <li>Removed <code>Guzzle\Http\Message\RequestInterface::isRedirect</code>. Use the HistoryPlugin.</li></ul> <h3 id="cache-plugin-breaking-changes"><a href="#cache-plugin-breaking-changes" aria-hidden="true" class="header-anchor">#</a> Cache plugin breaking changes</h3> <ul><li>CacheKeyProviderInterface and DefaultCacheKeyProvider are no longer used. All of this logic is handled in a
CacheStorageInterface. These two objects and interface will be removed in a future version.</li> <li>Always setting X-cache headers on cached responses</li> <li>Default cache TTLs are now handled by the CacheStorageInterface of a CachePlugin</li> <li><code>CacheStorageInterface::cache($key, Response $response, $ttl = null)</code> has changed to <code>cache(RequestInterface $request, Response $response);</code></li> <li><code>CacheStorageInterface::fetch($key)</code> has changed to <code>fetch(RequestInterface $request);</code></li> <li><code>CacheStorageInterface::delete($key)</code> has changed to <code>delete(RequestInterface $request);</code></li> <li>Added <code>CacheStorageInterface::purge($url)</code></li> <li><code>DefaultRevalidation::__construct(CacheKeyProviderInterface $cacheKey, CacheStorageInterface $cache, CachePlugin $plugin)</code> has changed to <code>DefaultRevalidation::__construct(CacheStorageInterface $cache, CanCacheStrategyInterface $canCache = null)</code></li> <li>Added <code>RevalidationInterface::shouldRevalidate(RequestInterface $request, Response $response)</code></li></ul> <h2 id="_3-5-to-3-6"><a href="#_3-5-to-3-6" aria-hidden="true" class="header-anchor">#</a> 3.5 to 3.6</h2> <ul><li>Mixed casing of headers are now forced to be a single consistent casing across all values for that header.</li> <li>Messages internally use a HeaderCollection object to delegate handling case-insensitive header resolution</li> <li>Removed the whole changedHeader() function system of messages because all header changes now go through addHeader().
For example, setHeader() first removes the header using unset on a HeaderCollection and then calls addHeader().
Keeping the Host header and URL host in sync is now handled by overriding the addHeader method in Request.</li> <li>Specific header implementations can be created for complex headers. When a message creates a header, it uses a
HeaderFactory which can map specific headers to specific header classes. There is now a Link header and
CacheControl header implementation.</li> <li>Moved getLinks() from Response to just be used on a Link header object.</li></ul> <p>If you previously relied on Guzzle\Http\Message\Header::raw(), then you will need to update your code to use the
HeaderInterface (e.g. toArray(), getAll(), etc.).</p> <h3 id="interface-changes-2"><a href="#interface-changes-2" aria-hidden="true" class="header-anchor">#</a> Interface changes</h3> <ul><li>Removed from interface: Guzzle\Http\ClientInterface::setUriTemplate</li> <li>Removed from interface: Guzzle\Http\ClientInterface::setCurlMulti()</li> <li>Removed Guzzle\Http\Message\Request::receivedRequestHeader() and implemented this functionality in
Guzzle\Http\Curl\RequestMediator</li> <li>Removed the optional $asString parameter from MessageInterface::getHeader(). Just cast the header to a string.</li> <li>Removed the optional $tryChunkedTransfer option from Guzzle\Http\Message\EntityEnclosingRequestInterface</li> <li>Removed the $asObjects argument from Guzzle\Http\Message\MessageInterface::getHeaders()</li></ul> <h3 id="removed-deprecated-functions"><a href="#removed-deprecated-functions" aria-hidden="true" class="header-anchor">#</a> Removed deprecated functions</h3> <ul><li>Removed Guzzle\Parser\ParserRegister::get(). Use getParser()</li> <li>Removed Guzzle\Parser\ParserRegister::set(). Use registerParser().</li></ul> <h3 id="deprecations-2"><a href="#deprecations-2" aria-hidden="true" class="header-anchor">#</a> Deprecations</h3> <ul><li>The ability to case-insensitively search for header values</li> <li>Guzzle\Http\Message\Header::hasExactHeader</li> <li>Guzzle\Http\Message\Header::raw. Use getAll()</li> <li>Deprecated cache control specific methods on Guzzle\Http\Message\AbstractMessage. Use the CacheControl header object
instead.</li></ul> <h3 id="other-changes"><a href="#other-changes" aria-hidden="true" class="header-anchor">#</a> Other changes</h3> <ul><li>All response header helper functions return a string rather than mixing Header objects and strings inconsistently</li> <li>Removed cURL blacklist support. This is no longer necessary now that Expect, Accept, etc. are managed by Guzzle
directly via interfaces</li> <li>Removed the injecting of a request object onto a response object. The methods to get and set a request still exist
but are a no-op until removed.</li> <li>Most classes that used to require a <code>Guzzle\Service\Command\CommandInterface</code> typehint now request a
<code>Guzzle\Service\Command\ArrayCommandInterface</code>.</li> <li>Added <code>Guzzle\Http\Message\RequestInterface::startResponse()</code> to the RequestInterface to handle injecting a response
on a request while the request is still being transferred</li> <li><code>Guzzle\Service\Command\CommandInterface</code> now extends from ToArrayInterface and ArrayAccess</li></ul> <h2 id="_3-3-to-3-4"><a href="#_3-3-to-3-4" aria-hidden="true" class="header-anchor">#</a> 3.3 to 3.4</h2> <p>Base URLs of a client now follow the rules of http://tools.ietf.org/html/rfc3986#section-5.2.2 when merging URLs.</p> <h2 id="_3-2-to-3-3"><a href="#_3-2-to-3-3" aria-hidden="true" class="header-anchor">#</a> 3.2 to 3.3</h2> <h3 id="response-getetag-quote-stripping-removed"><a href="#response-getetag-quote-stripping-removed" aria-hidden="true" class="header-anchor">#</a> Response::getEtag() quote stripping removed</h3> <p><code>Guzzle\Http\Message\Response::getEtag()</code> no longer strips quotes around the ETag response header</p> <h3 id="removed-guzzle-http-utils"><a href="#removed-guzzle-http-utils" aria-hidden="true" class="header-anchor">#</a> Removed <code>Guzzle\Http\Utils</code></h3> <p>The <code>Guzzle\Http\Utils</code> class was removed. This class was only used for testing.</p> <h3 id="stream-wrapper-and-type"><a href="#stream-wrapper-and-type" aria-hidden="true" class="header-anchor">#</a> Stream wrapper and type</h3> <p><code>Guzzle\Stream\Stream::getWrapper()</code> and <code>Guzzle\Stream\Stream::getStreamType()</code> are no longer converted to lowercase.</p> <h3 id="curl-emit-io-became-emit-io"><a href="#curl-emit-io-became-emit-io" aria-hidden="true" class="header-anchor">#</a> curl.emit_io became emit_io</h3> <p>Emitting IO events from a RequestMediator is now a parameter that must be set in a request's curl options using the
'emit_io' key. This was previously set under a request's parameters using 'curl.emit_io'</p> <h2 id="_3-1-to-3-2"><a href="#_3-1-to-3-2" aria-hidden="true" class="header-anchor">#</a> 3.1 to 3.2</h2> <h3 id="curlmulti-is-no-longer-reused-globally"><a href="#curlmulti-is-no-longer-reused-globally" aria-hidden="true" class="header-anchor">#</a> CurlMulti is no longer reused globally</h3> <p>Before 3.2, the same CurlMulti object was reused globally for each client. This can cause issue where plugins added
to a single client can pollute requests dispatched from other clients.</p> <p>If you still wish to reuse the same CurlMulti object with each client, then you can add a listener to the
ServiceBuilder's <code>service_builder.create_client</code> event to inject a custom CurlMulti object into each client as it is
created.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$multi</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Guzzle<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Curl<span class="token punctuation">\</span>CurlMulti</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$builder</span> <span class="token operator">=</span> Guzzle\<span class="token package">Service<span class="token punctuation">\</span>Builder<span class="token punctuation">\</span>ServiceBuilder</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/config.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$builder</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'service_builder.create_client'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$multi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$event</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'client'</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setCurlMulti</span><span class="token punctuation">(</span><span class="token variable">$multi</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="no-default-path"><a href="#no-default-path" aria-hidden="true" class="header-anchor">#</a> No default path</h3> <p>URLs no longer have a default path value of '/' if no path was specified.</p> <p>Before:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'http://www.foo.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &gt;&gt; http://www.foo.com/</span>
</code></pre></div><p>After:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'http://www.foo.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &gt;&gt; http://www.foo.com</span>
</code></pre></div><h3 id="less-verbose-badresponseexception"><a href="#less-verbose-badresponseexception" aria-hidden="true" class="header-anchor">#</a> Less verbose BadResponseException</h3> <p>The exception message for <code>Guzzle\Http\Exception\BadResponseException</code> no longer contains the full HTTP request and
response information. You can, however, get access to the request and response object by calling <code>getRequest()</code> or
<code>getResponse()</code> on the exception object.</p> <h3 id="query-parameter-aggregation"><a href="#query-parameter-aggregation" aria-hidden="true" class="header-anchor">#</a> Query parameter aggregation</h3> <p>Multi-valued query parameters are no longer aggregated using a callback function. <code>Guzzle\Http\Query</code> now has a
setAggregator() method that accepts a <code>Guzzle\Http\QueryAggregator\QueryAggregatorInterface</code> object. This object is
responsible for handling the aggregation of multi-valued query string variables into a flattened hash.</p> <h2 id="_2-8-to-3-x"><a href="#_2-8-to-3-x" aria-hidden="true" class="header-anchor">#</a> 2.8 to 3.x</h2> <h3 id="guzzle-service-inspector"><a href="#guzzle-service-inspector" aria-hidden="true" class="header-anchor">#</a> Guzzle\Service\Inspector</h3> <p>Change <code>\Guzzle\Service\Inspector::fromConfig</code> to <code>\Guzzle\Common\Collection::fromConfig</code></p> <p><strong>Before</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>Inspector</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">YourClient</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token punctuation">\</span>Guzzle<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>Client</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token variable">$config</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$required</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'base_url'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'username'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'api_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$config</span> <span class="token operator">=</span> Inspector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fromConfig</span><span class="token punctuation">(</span><span class="token variable">$config</span><span class="token punctuation">,</span> <span class="token variable">$default</span><span class="token punctuation">,</span> <span class="token variable">$required</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">self</span><span class="token punctuation">(</span>
            <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'base_url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'api_key'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token variable">$config</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setDescription</span><span class="token punctuation">(</span>ServiceDescription<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token constant">__DIR__</span> <span class="token punctuation">.</span> <span class="token constant">DIRECTORY_SEPARATOR</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'client.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$client</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>After</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Common<span class="token punctuation">\</span>Collection</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">YourClient</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token punctuation">\</span>Guzzle<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>Client</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token variable">$config</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$required</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'base_url'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'username'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'api_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$config</span> <span class="token operator">=</span> Collection<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fromConfig</span><span class="token punctuation">(</span><span class="token variable">$config</span><span class="token punctuation">,</span> <span class="token variable">$default</span><span class="token punctuation">,</span> <span class="token variable">$required</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">self</span><span class="token punctuation">(</span>
            <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'base_url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'api_key'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token variable">$config</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setDescription</span><span class="token punctuation">(</span>ServiceDescription<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token constant">__DIR__</span> <span class="token punctuation">.</span> <span class="token constant">DIRECTORY_SEPARATOR</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'client.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$client</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="convert-xml-service-descriptions-to-json"><a href="#convert-xml-service-descriptions-to-json" aria-hidden="true" class="header-anchor">#</a> Convert XML Service Descriptions to JSON</h3> <p><strong>Before</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>client</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>commands</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Groups --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>command</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>list_groups<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>GET<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>groups.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>Get a list of groups<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>command</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>command</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>search_groups<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>GET<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>search.json?query=<span class="token punctuation">&quot;</span>{{query}} type:group<span class="token punctuation">&quot;</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>Uses a search query to get a list of groups<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>query<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>command</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>command</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>create_group<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>groups.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>Create a group<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token attr-name">filters</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>json_encode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Group JSON<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token attr-name">static</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>application/json<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>command</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>command</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>delete_group<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>DELETE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>groups/{{id}}.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>Delete a group by ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>command</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>command</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>get_group<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>GET<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>groups/{{id}}.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>command</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>command</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>update_group<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PUT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>groups/{{id}}.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>doc</span><span class="token punctuation">&gt;</span></span>Update a group<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>doc</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token attr-name">filters</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>json_encode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Group JSON<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token attr-name">static</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>application/json<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>command</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>commands</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>client</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>After</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;Zendesk REST API v2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;apiVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-12-31&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Provides access to Zendesk views, groups, tickets, ticket fields, and users&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;operations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;list_groups&quot;</span><span class="token operator">:</span>  <span class="token punctuation">{</span>
            <span class="token property">&quot;httpMethod&quot;</span><span class="token operator">:</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;groups.json&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;Get a list of groups&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;search_groups&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;httpMethod&quot;</span><span class="token operator">:</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;search.json?query=\&quot;{query} type:group\&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;Uses a search query to get a list of groups&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;uri&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Zendesk Search Query&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;create_group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;httpMethod&quot;</span><span class="token operator">:</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;groups.json&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;Create a group&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;data&quot;</span><span class="token operator">:</span>        <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Group JSON&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span>    <span class="token string">&quot;json_encode&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;Content-Type&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>    <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;static&quot;</span><span class="token operator">:</span>  <span class="token string">&quot;application/json&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;delete_group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;httpMethod&quot;</span><span class="token operator">:</span><span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;groups/{id}.json&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;Delete a group&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;uri&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Group to delete by ID&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;get_group&quot;</span><span class="token operator">:</span>    <span class="token punctuation">{</span>
            <span class="token property">&quot;httpMethod&quot;</span><span class="token operator">:</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;groups/{id}.json&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;Get a ticket&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;uri&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Group to get by ID&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;update_group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;httpMethod&quot;</span><span class="token operator">:</span><span class="token string">&quot;PUT&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;groups/{id}.json&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;Update a group&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span>          <span class="token punctuation">{</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;uri&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Group to update by ID&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;data&quot;</span><span class="token operator">:</span>        <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>       <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Group JSON&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span>    <span class="token string">&quot;json_encode&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;Content-Type&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span>    <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;static&quot;</span><span class="token operator">:</span>  <span class="token string">&quot;application/json&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="guzzle-service-description-servicedescription"><a href="#guzzle-service-description-servicedescription" aria-hidden="true" class="header-anchor">#</a> Guzzle\Service\Description\ServiceDescription</h3> <p>Commands are now called Operations</p> <p><strong>Before</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>Description<span class="token punctuation">\</span>ServiceDescription</span><span class="token punctuation">;</span>

<span class="token variable">$sd</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// @returns ApiCommandInterface[]</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasCommand</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getCommand</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// @returns ApiCommandInterface|null</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addCommand</span><span class="token punctuation">(</span><span class="token variable">$command</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// @param ApiCommandInterface $command</span>
</code></pre></div><p><strong>After</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>Description<span class="token punctuation">\</span>ServiceDescription</span><span class="token punctuation">;</span>

<span class="token variable">$sd</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getOperations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// @returns OperationInterface[]</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOperation</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getOperation</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// @returns OperationInterface|null</span>
<span class="token variable">$sd</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addOperation</span><span class="token punctuation">(</span><span class="token variable">$operation</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// @param OperationInterface $operation</span>
</code></pre></div><h3 id="guzzle-common-inflection-inflector"><a href="#guzzle-common-inflection-inflector" aria-hidden="true" class="header-anchor">#</a> Guzzle\Common\Inflection\Inflector</h3> <p>Namespace is now <code>Guzzle\Inflection\Inflector</code></p> <h3 id="guzzle-http-plugin"><a href="#guzzle-http-plugin" aria-hidden="true" class="header-anchor">#</a> Guzzle\Http\Plugin</h3> <p>Namespace is now <code>Guzzle\Plugin</code>. Many other changes occur within this namespace and are detailed in their own sections below.</p> <h3 id="guzzle-http-plugin-logplugin-and-guzzle-common-log"><a href="#guzzle-http-plugin-logplugin-and-guzzle-common-log" aria-hidden="true" class="header-anchor">#</a> Guzzle\Http\Plugin\LogPlugin and Guzzle\Common\Log</h3> <p>Now <code>Guzzle\Plugin\Log\LogPlugin</code> and <code>Guzzle\Log</code> respectively.</p> <p><strong>Before</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Common<span class="token punctuation">\</span>Log<span class="token punctuation">\</span>ClosureLogAdapter</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>LogPlugin</span><span class="token punctuation">;</span>

<span class="token comment">/** @var \Guzzle\Http\Client */</span>
<span class="token variable">$client</span><span class="token punctuation">;</span>

<span class="token comment">// $verbosity is an integer indicating desired message verbosity level</span>
<span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LogPlugin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosureLogAdapter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token variable">$m</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$verbosity</span> <span class="token operator">=</span> LogPlugin<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">LOG_VERBOSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>After</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Log<span class="token punctuation">\</span>ClosureLogAdapter</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Log<span class="token punctuation">\</span>MessageFormatter</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>Log<span class="token punctuation">\</span>LogPlugin</span><span class="token punctuation">;</span>

<span class="token comment">/** @var \Guzzle\Http\Client */</span>
<span class="token variable">$client</span><span class="token punctuation">;</span>

<span class="token comment">// $format is a string indicating desired message format -- @see MessageFormatter</span>
<span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LogPlugin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosureLogAdapter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token variable">$m</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$format</span> <span class="token operator">=</span> MessageFormatter<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">DEBUG_FORMAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="guzzle-http-plugin-curlauthplugin"><a href="#guzzle-http-plugin-curlauthplugin" aria-hidden="true" class="header-anchor">#</a> Guzzle\Http\Plugin\CurlAuthPlugin</h3> <p>Now <code>Guzzle\Plugin\CurlAuth\CurlAuthPlugin</code>.</p> <h3 id="guzzle-http-plugin-exponentialbackoffplugin"><a href="#guzzle-http-plugin-exponentialbackoffplugin" aria-hidden="true" class="header-anchor">#</a> Guzzle\Http\Plugin\ExponentialBackoffPlugin</h3> <p>Now <code>Guzzle\Plugin\Backoff\BackoffPlugin</code>, and other changes.</p> <p><strong>Before</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>ExponentialBackoffPlugin</span><span class="token punctuation">;</span>

<span class="token variable">$backoffPlugin</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExponentialBackoffPlugin</span><span class="token punctuation">(</span><span class="token variable">$maxRetries</span><span class="token punctuation">,</span> <span class="token function">array_merge</span><span class="token punctuation">(</span>
        ExponentialBackoffPlugin<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getDefaultFailureCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">429</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token variable">$backoffPlugin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>After</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>Backoff<span class="token punctuation">\</span>BackoffPlugin</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Guzzle<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>Backoff<span class="token punctuation">\</span>HttpBackoffStrategy</span><span class="token punctuation">;</span>

<span class="token comment">// Use convenient factory method instead -- see implementation for ideas of what</span>
<span class="token comment">// you can do with chaining backoff strategies</span>
<span class="token variable">$backoffPlugin</span> <span class="token operator">=</span> BackoffPlugin<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getExponentialBackoff</span><span class="token punctuation">(</span><span class="token variable">$maxRetries</span><span class="token punctuation">,</span> <span class="token function">array_merge</span><span class="token punctuation">(</span>
        HttpBackoffStrategy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getDefaultFailureCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">429</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token variable">$backoffPlugin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="known-issues"><a href="#known-issues" aria-hidden="true" class="header-anchor">#</a> Known Issues</h3> <h4 id="bug-accept-encoding-header-behavior-changed-unintentionally"><a href="#bug-accept-encoding-header-behavior-changed-unintentionally" aria-hidden="true" class="header-anchor">#</a> [BUG] Accept-Encoding header behavior changed unintentionally.</h4> <p>(See #217) (Fixed in 09daeb8c666fb44499a0646d655a8ae36456575e)</p> <p>In version 2.8 setting the <code>Accept-Encoding</code> header would set the CURLOPT_ENCODING option, which permitted cURL to
properly handle gzip/deflate compressed responses from the server. In versions affected by this bug this does not happen.
See issue #217 for a workaround, or use a version containing the fix.</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="Laputa/assets/js/45.f6149b9c.js" defer></script><script src="Laputa/assets/js/app.6f999ec1.js" defer></script>
  </body>
</html>
