<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>calibur.tv - 天下漫友是一家</title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="https://static.calibur.tv/favicon.ico">
    
    <link rel="preload" href="/Laputa/assets/css/0.styles.c4c0b6bf.css" as="style"><link rel="preload" href="/Laputa/assets/js/app.ad499e69.js" as="script"><link rel="preload" href="/Laputa/assets/js/15.bad4212f.js" as="script"><link rel="prefetch" href="/Laputa/assets/js/7.c641c61e.js"><link rel="prefetch" href="/Laputa/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/Laputa/assets/js/3.6992acff.js"><link rel="prefetch" href="/Laputa/assets/js/4.46d60c2e.js"><link rel="prefetch" href="/Laputa/assets/js/5.a1a56ee0.js"><link rel="prefetch" href="/Laputa/assets/js/6.dd980f89.js"><link rel="prefetch" href="/Laputa/assets/js/8.69b175f0.js"><link rel="prefetch" href="/Laputa/assets/js/9.84ab4a6c.js"><link rel="prefetch" href="/Laputa/assets/js/10.f59205e5.js"><link rel="prefetch" href="/Laputa/assets/js/11.e7d00fc8.js"><link rel="prefetch" href="/Laputa/assets/js/12.07dda909.js"><link rel="prefetch" href="/Laputa/assets/js/13.e159813c.js"><link rel="prefetch" href="/Laputa/assets/js/14.a45eb292.js">
    <link rel="stylesheet" href="/Laputa/assets/css/0.styles.c4c0b6bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Laputa/" class="home-link router-link-active"><!----> <span class="site-name">calibur.tv - 天下漫友是一家</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Laputa/" class="sidebar-link">首页</a></li><li><a href="/Laputa/api/v1/" class="sidebar-link">接口文档</a></li></ul> </div> <div class="page"> <div class="content"><blockquote><p>视频资源补档步骤</p></blockquote> <ol><li>网站上的所有媒体资源托管在<a href="https://www.qiniu.com/" target="_blank" rel="noopener noreferrer">七牛云<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>上</li> <li>七牛云支持多种资源上传方式，包括网页上传、ftp上传、cmd上传，我们选择 cmd 的方式</li> <li>cmd 在 MacOS 下就是 iterm2 之类的命令行工具，Windows 下就是<code>命令提示符</code> <blockquote><p>这里介绍一下 Windows 平台下 cmd 的打开方式，以 Windows10 系统为例<br></p> <ol><li>按下 windows 键</li> <li>直接键盘输入 <code>cmd</code> 就会开始搜索</li> <li>搜索结果会出现<code>命令提示符</code>这个应用，打开就行了</li> <li>如果还不明白，可以看这里的<a href="http://www.192ly.com/pc/win10/win10-dk-cmd.html" target="_blank" rel="noopener noreferrer">教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Windows 其它系统可以自行百度一下, MacOS 下开启很简单，就不介绍了</li></ol></blockquote></li> <li>关于七牛云 cmd 上传工具 -&gt; <a href="https://github.com/qiniu/qshell" target="_blank" rel="noopener noreferrer">qshell<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，提示一下几点：
<blockquote><ol><li>介绍中只需要看<code>简介</code>,<code>下载</code>,<code>安装</code>,<code>密匙设置</code>就行了</li> <li>下载的这个<code>qshell-windows-x64.exe</code>或<code>qshell-darwin-x64</code>无法运行在桌面上的，也不需要安装</li> <li>重命名你下载的文件，如<code>qshell-windows-x64.exe</code>改为<code>qshell.exe</code></li> <li>只需要将这个软件包移动到任意目录下即可（注：这个目录之后会写入系统变量PATH中）</li> <li>cmd 命令行工具打开后，如何切换文件目录，记住这几个简单的命令<br>
输入<code>C:</code>进入 C 盘，输入<code>D:</code>进入 D 盘，输入指定的盘符加英文<code>:</code>，进入指定的系统盘<br>
输入<code>cd dirname</code>就会进入当前所在目录下的 dirname 文件夹<br>
输入<code>cd..</code> 就会返回上一级目录<br>
输入命令后记得敲<code>回车键</code>执行
按下<code>↑</code>键可以自动填充你上一次输入的命令，<code>↓</code>键填充下一次输入的命令</li></ol></blockquote></li> <li>添加<code>qshell</code>所在目录到环境变量<code>PATH</code>中：
<blockquote><p>参见<a href="http://jingyan.baidu.com/article/ad310e80d2ebe31848f49e59.html" target="_blank" rel="noopener noreferrer">百度经验<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
不同点如下：</p> <ol><li>百度经验第七部的截图中，不要点<code>新建</code>按钮</li> <li>双击截图中的<code>系统变量</code>选项框里的<code>Path</code></li> <li>然后在新弹出的窗口点击新建，输入你下载的<code>upload.exe</code>文件所在的目录即可</li></ol></blockquote></li> <li><code>qshell</code>介绍的页面里，比如这一句：<div class="language-shell extra-class"><pre class="language-text"><code>$ qshell -m account ak sk
</code></pre></div>前面的<code>$</code>代表<code>shell</code>命令，不要复制粘贴这个符号</li> <li><code>AccessKey</code>和<code>SecretKey</code>我会给你的，你在命令行里输入就行了</li> <li>假设（这里你任意挑选一个空间合适的盘符就行）<code>qshell</code>在<code>E:</code>盘的<code>upload</code>目录下，那么<code>E:\upload\</code>文件夹就是文件上传的<code>根目录</code></li> <li>创建一个文件，名为<code>upload.json</code>，内容如下（重要：不可修改）<div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;src_dir&quot;</span>            <span class="token operator">:</span>   <span class="token string">&quot;E:\\upload&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bucket&quot;</span>             <span class="token operator">:</span>   <span class="token string">&quot;clannader&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;overwrite&quot;</span>          <span class="token operator">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rescan_local&quot;</span>       <span class="token operator">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;skip_suffixes&quot;</span>      <span class="token operator">:</span>   <span class="token string">&quot;.DS_Store&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;log_level&quot;</span>          <span class="token operator">:</span>   <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;file_type&quot;</span>          <span class="token operator">:</span>   <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>文件上传的根目录下，要为每一个番剧设立文件夹，将视频和图片等资源放在特定的文件夹下<br>
假设有个<code>攻壳机动队</code>的番剧，那么这个文件夹应该是这样的：
<blockquote><p>E:<br>
|----- 其它文件夹<br>
|----- upload （文件上传根目录）<br>
     |----- other （其它类别目录）<br>
     |----- bangumi （番剧目录）<br>
          |----- 其它番剧目录<br>
          |----- ghost-in-the-shell （番剧目录）<br>
               |----- other （其它资源目录）<br>
               |----- poster （视频封面目录）<br>
               |----- video （视频资源目录） <br>
                    |----- 720 （720P资源） <br></p></blockquote></li> <li>就是上面这个结构了，也就是说每一次新建一个番剧的任务，都要新建一个文件夹<br>
文件夹名称要求英文，并且纯小写，不同单词间用<code>-</code>链接，番剧英文名可以百度</li> <li>视频如果是720P的，就在<code>video</code>目录下面新建一个叫<code>720</code>的文件夹，1080P同理</li> <li>视频资源和视频封面的命名规则：<br> <blockquote><ol><li>名称：<code>&quot;集数.文件后缀&quot;</code>，如果番剧的第二季也是从第1集开始的，那么就要在第一集的集数后面累加<br>
如：叛逆的鲁鲁修R2 - 01，在这里就是 26.mp4</li> <li>如果有超过9集的动画，那么第一集是 1.mp4 而不是 01.mp4</li></ol></blockquote></li> <li>空间特性：如果某个资源以及上传成功了，那么即使在<code>upload</code>目录下删了这个资源，七牛云上的资源也不会被删除，因此上传完的资源就可以删除了以免占用本地空间</li> <li>如果已经上传了<code>1.jpg</code>，然后再上传一个<code>1.jpg</code>，那之前的<code>1.jpg</code>会被替换掉（必须路径也相同才会被替换）</li> <li>放入空间的资源不会自动上传，需要在命令行的文件上传根目录下输入命令才会上传，命令如下：<br></li></ol> <div class="language-shell extra-class"><pre class="language-text"><code> qshell qupload upload.json
</code></pre></div><ol start="17"><li>请勿上传与网站无关的私人资源，因为七牛云空间做了防盗链设置，所有的资源只有在指定的域名下才能被访问</li> <li>有任何疑问可以直接问我，我会补充的</li> <li>上传示例：
<img src="http://cdn.riuir.com/owner/QQ20170923-112209@2x.png" alt="图片"> <blockquote><ol><li>选择一个番剧</li></ol></blockquote> <ol start="2"><li>填写你这次要传的集数，如果你只传1集，你需要写<code>1-1</code>，如果要传<code>26~50</code>集，就填<code>26-50</code></li> <li>名称是英文名，纯小写，单词间短横线隔开，名称可以去百度查，<strong>这里的名称需要和你上传的番剧的文件夹名称相同</strong></li> <li>画质现在提供<code>720P</code>和<code>1080P</code>的选择，如果两个都不选，就是外链资源</li> <li>选了画质之后，会在资源链接后面显示<code>字幕</code>开关，默认是关的，如果该视频需要字幕，你可以打开（暂不支持加载字幕）</li> <li>资源、封面都是批量传的，这是因为你之前已经把视频资源和图片资源传到了七牛云上，现在的录入只是将云空间的资源和本地数据库链接起来<br>
所以之前上传的资源，视频和图片的文件夹目录、文件名都是有规律的，如果写错了，这里的资源录入就失败了**（建议严格安排好目录结构，方便以后拓展）**<br></li> <li>如果把字幕的勾选取消掉了，字幕那一栏也不会消失，不用管，反正又不加载它</li> <li>视频资源、封面资源里的<code>${n}</code>是不用改的，这是批量形式的，它会自动根据你上面填的<code>集数&quot;区间&quot;</code>来填充</li> <li>剧集名称就需要一个一个添加了，因为是没有规律的，需要一行一个，按顺序，不带空行</li> <li>然后点击确定，万无一失的情况下就上传成功了，如果失败了，找我！</li> <li>如果你批量操作的时候，视频封面图的图后是<code>.png</code>格式的，而其中某一个是<code>.jpg</code>格式的，那么你就需要编辑一下这部视频</li> <li>期间哪里出问题，都可以问我</li></ol></li></ol></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/Laputa/assets/js/15.bad4212f.js" defer></script><script src="/Laputa/assets/js/app.ad499e69.js" defer></script>
  </body>
</html>
