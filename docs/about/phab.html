<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工作流简介 | calibur.tv - 天下漫友是一家</title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="https://static.calibur.tv/favicon.ico">
    
    <link rel="preload" href="/Laputa/assets/css/0.styles.c4c0b6bf.css" as="style"><link rel="preload" href="/Laputa/assets/js/app.dba02385.js" as="script"><link rel="preload" href="/Laputa/assets/js/8.f3dc8888.js" as="script"><link rel="prefetch" href="/Laputa/assets/js/7.b945083d.js"><link rel="prefetch" href="/Laputa/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/Laputa/assets/js/3.6992acff.js"><link rel="prefetch" href="/Laputa/assets/js/4.d9eba96a.js"><link rel="prefetch" href="/Laputa/assets/js/5.7068bd6d.js"><link rel="prefetch" href="/Laputa/assets/js/6.41d9b7c5.js"><link rel="prefetch" href="/Laputa/assets/js/9.1c8654ce.js"><link rel="prefetch" href="/Laputa/assets/js/10.6239950a.js"><link rel="prefetch" href="/Laputa/assets/js/11.96853274.js"><link rel="prefetch" href="/Laputa/assets/js/12.20ccc4de.js"><link rel="prefetch" href="/Laputa/assets/js/13.89aa3bfd.js"><link rel="prefetch" href="/Laputa/assets/js/14.cb8a7ba3.js"><link rel="prefetch" href="/Laputa/assets/js/15.84b793ff.js"><link rel="prefetch" href="/Laputa/assets/js/16.cc72bd45.js">
    <link rel="stylesheet" href="/Laputa/assets/css/0.styles.c4c0b6bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Laputa/" class="home-link router-link-active"><!----> <span class="site-name">calibur.tv - 天下漫友是一家</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Laputa/" class="sidebar-link">首页</a></li><li><a href="/Laputa/api/v1/" class="sidebar-link">接口文档</a></li></ul> </div> <div class="page"> <div class="content"><h2 id="工作流简介"><a href="#工作流简介" aria-hidden="true" class="header-anchor">#</a> 工作流简介</h2> <h3 id="注册-phabricator"><a href="#注册-phabricator" aria-hidden="true" class="header-anchor">#</a> 注册 Phabricator</h3> <blockquote><p>Phabricator 是 Facebook 研发的任务管理系统，用于多人协作下的任务指派、评审和提交</p></blockquote> <ol><li>打开 <a href="http://phab.riuir.com" target="_blank" rel="noopener noreferrer">http://phab.riuir.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，然后注册一个新用户</li> <li>完成邮箱认证并等待管理员通过注册申请</li> <li>进入网站后依次进行如下操作：
<img src="http://cdn.riuir.com/owner/phab1.png" alt="phab1"></li> <li>这样你就已经上传了自己的 SSH key，之后就可以对代码进行提交了</li></ol> <blockquote><p>PS：怎么生成 SSH key，相信对大家来说都不是问题</p></blockquote> <h3 id="安装-arcanist"><a href="#安装-arcanist" aria-hidden="true" class="header-anchor">#</a> 安装 Arcanist</h3> <blockquote><p>Arcanist 是要与 Phabricator 配合的命令行工具，用于代码的提交，任务的交接</p></blockquote> <ol><li>安装：<a href="https://secure.phabricator.com/book/phabricator/article/arcanist_quick_start/" target="_blank" rel="noopener noreferrer">macOS 安装指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<a href="https://secure.phabricator.com/book/phabricator/article/arcanist_windows/" target="_blank" rel="noopener noreferrer">windows 安装指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>安装完成之后你需要在 github-repo 所在的目录下运行：</li></ol> <div class="language-sell extra-class"><pre class="language-text"><code>arc install-certificate
</code></pre></div><ol start="3"><li>然后要输入一个 Token，这个 Token 跟着下图的步骤可以获取：
<img src="http://cdn.riuir.com/owner/phab2.png" alt="phab2"></li> <li>至此，工作前的准备就完成了</li></ol> <h3 id="开始"><a href="#开始" aria-hidden="true" class="header-anchor">#</a> 开始</h3> <ol><li>首先，你会接受到一个 task，一般情况下我会在 IM 软件中与你沟通，发给你网址，这个网址类似于：<a href="http://phab.riuir.com/D4" target="_blank" rel="noopener noreferrer">http://phab.riuir.com/D4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>任务的要求会在页面上展示，根据要求 coding</li> <li>进入索要工作的 repo 目录下，执行：</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>arc tasks
</code></pre></div><p>你会看到类似这样的返回：
<img src="http://cdn.riuir.com/owner/phab3.png" alt="phab3">
4. 看到你的 task 列表后，然后执行：</p> <div class="language-shell extra-class"><pre class="language-text"><code>arc feature T7
</code></pre></div><p>这个**<code>T7</code>**是任务的编号，然后你就会自动 new 一个叫 T7 的 branch，现在就可以开始 coding 了</p> <blockquote><p><code>注意：你在 arc feature 之前先 checkout 到 master 分支，因为你要在当前 branch 创建一个新分支</code><br> <code>注意：前端和后端的开发人员，除非是严重的 bug fix，不然不要直接 git push to master branch，因为 master 分支是自动部署的</code></p></blockquote> <ol start="5"><li>当你 coding 完之后，先将代码 commit 到你本地，然后你需要运行如下命令：</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>arc diff master --preview 
</code></pre></div><p>它会把你当前所在的 branch 和 master 分支 diff，然后提交 preview，如图：
<img src="http://cdn.riuir.com/owner/phab4.png" alt="phab4"></p> <blockquote><p>PS：我这边为了演示又创建了一个 task，所以图中是 T8
然后进入图中的链接，然后进行如下操作：</p></blockquote> <ol start="6"><li>如果你是第一次提交这个 task，那么选择 <code>Create New Revision</code>，否则选择你之前提交过的 Revision，新建 Revision 如图：
<img src="http://cdn.riuir.com/owner/phab5.png" alt="phab5"></li> <li>对网站首页做个介绍：
<img src="http://cdn.riuir.com/owner/phab6.png" alt="phab6">
如果你的 task 需要修改，那么会出现在<code>Ready to Update</code>，如果可以 land 到 master 分支，会出现在<code>Ready to Land</code></li> <li>如果审核通过可以 land，那么就进入 task 的 repo 目录下，然后切换到 task 的分支，然后执行：</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>arc land
</code></pre></div><ol start="9"><li>然后你要将这个 Revision 状态通过页面中的<code>Add Action</code>设置成 <strong>closed</strong>, 要将 task 的 status 通过<code>Add Action</code>设为 <strong>Resolved</strong></li> <li>如果审核不通过，你需要切换到这个 task 的分支下，修改，然后重复执行步骤：5 -&gt; 9</li></ol> <blockquote><p>以上就是基本的工作流程，如果我有讲的模糊或者有错误的地方，记得告诉我，我会更新文档</p></blockquote></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/Laputa/assets/js/8.f3dc8888.js" defer></script><script src="/Laputa/assets/js/app.dba02385.js" defer></script>
  </body>
</html>
