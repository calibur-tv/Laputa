(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{267:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("A lightweight implementation of\n"),a("a",{attrs:{href:"http://wiki.commonjs.org/wiki/Promises/A",target:"_blank",rel:"noopener noreferrer"}},[t._v("CommonJS Promises/A"),a("OutboundLink")],1),t._v(" for PHP.")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://travis-ci.org/reactphp/promise",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://travis-ci.org/reactphp/promise.svg?branch=master",alt:"Build Status"}}),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://coveralls.io/github/reactphp/promise?branch=master",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://coveralls.io/repos/github/reactphp/promise/badge.svg?branch=master",alt:"Coverage Status"}}),a("OutboundLink")],1)]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("React/Promise is a library implementing\n"),a("a",{attrs:{href:"http://wiki.commonjs.org/wiki/Promises/A",target:"_blank",rel:"noopener noreferrer"}},[t._v("CommonJS Promises/A"),a("OutboundLink")],1),t._v(" for PHP.")]),t._v(" "),a("p",[t._v("It also provides several other useful promise-related concepts, such as joining\nmultiple promises and mapping and reducing collections of promises.")]),t._v(" "),a("p",[t._v("If you've never heard about promises before,\n"),a("a",{attrs:{href:"https://gist.github.com/3889970",target:"_blank",rel:"noopener noreferrer"}},[t._v("read this first"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("A deferred represents an operation whose resolution is pending. It has separate\npromise and resolver parts.")]),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),a("p",[t._v("Returns the promise of the deferred, which you can hand out to others while\nkeeping the authority to modify its state to yourself.")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),a("p",[t._v("Triggers progress notifications, to indicate to consumers that the computation\nis making progress toward its result.")]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),a("p",[t._v("The promise interface provides the common interface for all promise\nimplementations.")]),t._v(" "),a("p",[t._v("A promise represents an eventual outcome, which is either fulfillment (success)\nand an associated value, or rejection (failure) and an associated reason.")]),t._v(" "),a("p",[t._v("Once in the fulfilled or rejected state, a promise becomes immutable.\nNeither its state nor its result (or error) can be modified.")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),a("p",[t._v("Transforms a promise's value by applying a function to the promise's fulfillment\nor rejection value. Returns a new promise for the transformed result.")]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),a("p",[t._v("The ExtendedPromiseInterface extends the PromiseInterface with useful shortcut\nand utility methods which are not part of the Promises/A specification.")]),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),a("p",[t._v("Consumes the promise's ultimate value if the promise fulfills, or handles the\nultimate error.")]),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),a("p",[t._v("Registers a rejection handler for promise. It is a shortcut for:")]),t._v(" "),t._m(52),t._m(53),t._v(" "),t._m(54),t._m(55),t._v(" "),t._m(56),a("p",[t._v('Allows you to execute "cleanup" type tasks in a promise chain.')]),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),a("p",[t._v("Consider the following synchronous code:")]),t._v(" "),t._m(60),t._m(61),t._v(" "),t._m(62),t._m(63),t._v(" "),t._m(64),a("p",[t._v("Registers a handler for progress updates from promise. It is a shortcut for:")]),t._v(" "),t._m(65),t._m(66),t._v(" "),a("p",[t._v("A cancellable promise provides a mechanism for consumers to notify the creator\nof the promise that they are not longer interested in the result of an\noperation.")]),t._v(" "),t._m(67),t._v(" "),t._m(68),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),a("p",[t._v("The promise constructor receives a resolver function and an optional canceller\nfunction which both will be called with 3 arguments:")]),t._v(" "),t._m(76),t._v(" "),a("p",[t._v("If the resolver or canceller throw an exception, the promise will be rejected\nwith that thrown exception as the rejection reason.")]),t._v(" "),t._m(77),t._v(" "),t._m(78),t._v(" "),a("p",[t._v("Creates a already fulfilled promise.")]),t._v(" "),t._m(79),t._m(80),t._v(" "),t._m(81),t._v(" "),a("p",[t._v("Creates a already rejected promise.")]),t._v(" "),t._m(82),t._m(83),t._v(" "),t._m(84),t._v(" "),t._m(85),t._v(" "),t._m(86),t._m(87),t._v(" "),a("p",[t._v("Useful functions for creating, joining, mapping and reducing collections of\npromises.")]),t._v(" "),t._m(88),t._v(" "),t._m(89),t._v(" "),t._m(90),t._m(91),t._v(" "),t._m(92),t._v(" "),t._m(93),t._v(" "),t._m(94),t._v(" "),t._m(95),t._v(" "),t._m(96),t._v(" "),t._m(97),t._m(98),t._v(" "),t._m(99),t._v(" "),t._m(100),t._v(" "),a("p",[t._v("This can be useful in situations where you need to reject a promise without\nthrowing an exception. For example, it allows you to propagate a rejection with\nthe value of another promise.")]),t._v(" "),t._m(101),t._v(" "),t._m(102),t._m(103),t._v(" "),t._m(104),t._v(" "),t._m(105),a("p",[t._v("Initiates a competitive race that allows one winner. Returns a promise which is\nresolved in the same way the first settled promise resolves.")]),t._v(" "),t._m(106),t._v(" "),t._m(107),t._m(108),t._v(" "),t._m(109),t._v(" "),t._m(110),t._v(" "),t._m(111),t._v(" "),t._m(112),t._m(113),t._v(" "),t._m(114),t._v(" "),t._m(115),t._v(" "),t._m(116),t._v(" "),t._m(117),t._m(118),t._v(" "),t._m(119),t._v(" "),t._m(120),t._v(" "),t._m(121),t._m(122),t._v(" "),t._m(123),t._v(" "),t._m(124),t._v(" "),t._m(125),t._v(" "),t._m(126),t._v(" "),t._m(127),t._m(128),t._v(" "),a("p",[t._v("A few simple examples to show how the mechanics of Promises/A forwarding works.\nThese examples are contrived, of course, and in real usage, promise chains will\ntypically be spread across several function calls, or even several levels of\nyour application architecture.")]),t._v(" "),t._m(129),t._v(" "),t._m(130),t._v(" "),t._m(131),t._v(" "),t._m(132),t._m(133),t._v(" "),a("p",[t._v("Rejected promises behave similarly, and also work similarly to try/catch:\nWhen you catch an exception, you must rethrow for it to propagate.")]),t._v(" "),a("p",[t._v('Similarly, when you handle a rejected promise, to propagate the rejection,\n"rethrow" it by either returning a rejected promise, or actually throwing\n(since promise translates thrown exceptions into rejections)')]),t._v(" "),t._m(134),t._m(135),t._v(" "),a("p",[t._v("Just like try/catch, you can choose to propagate or not. Mixing resolutions and\nrejections will still forward handler results in a predictable way.")]),t._v(" "),t._m(136),t._m(137),t._v(" "),t._m(138),t._v(" "),a("p",[t._v("Also in the same way as resolutions and rejections, if you don't register a\nprogress handler, the update will be propagated through.")]),t._v(" "),a("p",[t._v("If your progress handler throws an exception, the exception will be propagated\nto the next link in the chain. The best thing to do is to ensure your progress\nhandlers do not throw exceptions.")]),t._v(" "),a("p",[t._v("This gives you the opportunity to transform progress events at each step in the\nchain so that they are meaningful to the next step. It also allows you to choose\nnot to transform them, and simply let them propagate untransformed, by not\nregistering a progress handler.")]),t._v(" "),t._m(139),t._m(140),t._v(" "),a("p",[t._v("The golden rule is:")]),t._v(" "),t._m(141),t._v(" "),t._m(142),t._v(" "),t._m(143),t._v(" "),t._m(144),t._v(" "),t._m(145),t._v(" "),t._m(146),t._v(" "),t._m(147),t._m(148),t._v(" "),t._m(149),t._v(" "),t._m(150),t._v(" "),a("p",[t._v("React/Promise is a port of "),a("a",{attrs:{href:"https://github.com/cujojs/when",target:"_blank",rel:"noopener noreferrer"}},[t._v("when.js"),a("OutboundLink")],1),t._v("\nby "),a("a",{attrs:{href:"https://github.com/briancavalier",target:"_blank",rel:"noopener noreferrer"}},[t._v("Brian Cavalier"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("Also, large parts of the documentation have been ported from the when.js\n"),a("a",{attrs:{href:"https://github.com/cujojs/when/wiki",target:"_blank",rel:"noopener noreferrer"}},[t._v("Wiki"),a("OutboundLink")],1),t._v(" and the\n"),a("a",{attrs:{href:"https://github.com/cujojs/when/blob/master/docs/api.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("API docs"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(151),t._v(" "),a("p",[t._v("React/Promise is released under the "),a("a",{attrs:{href:"https://github.com/reactphp/promise/blob/master/LICENSE",target:"_blank",rel:"noopener noreferrer"}},[t._v("MIT"),a("OutboundLink")],1),t._v(" license.")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"react-promise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-promise","aria-hidden":"true"}},[this._v("#")]),this._v(" React/Promise")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents","aria-hidden":"true"}},[this._v("#")]),this._v(" Table of Contents")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("a",{attrs:{href:"#introduction"}},[t._v("Introduction")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#concepts"}},[t._v("Concepts")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deferred"}},[t._v("Deferred")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#promise"}},[t._v("Promise")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#api"}},[t._v("API")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deferred-1"}},[t._v("Deferred")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deferredpromise"}},[t._v("Deferred::promise()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#deferredresolve"}},[t._v("Deferred::resolve()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#deferredreject"}},[t._v("Deferred::reject()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#deferrednotify"}},[t._v("Deferred::notify()")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#promiseinterface"}},[t._v("PromiseInterface")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#promiseinterfacethen"}},[t._v("PromiseInterface::then()")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#extendedpromiseinterface"}},[t._v("ExtendedPromiseInterface")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#extendedpromiseinterfacedone"}},[t._v("ExtendedPromiseInterface::done()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#extendedpromiseinterfaceotherwise"}},[t._v("ExtendedPromiseInterface::otherwise()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#extendedpromiseinterfacealways"}},[t._v("ExtendedPromiseInterface::always()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#extendedpromiseinterfaceprogress"}},[t._v("ExtendedPromiseInterface::progress()")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#cancellablepromiseinterface"}},[t._v("CancellablePromiseInterface")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#cancellablepromiseinterfacecancel"}},[t._v("CancellablePromiseInterface::cancel()")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#promise-1"}},[t._v("Promise")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#fulfilledpromise"}},[t._v("FulfilledPromise")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#rejectedpromise"}},[t._v("RejectedPromise")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#lazypromise"}},[t._v("LazyPromise")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#functions"}},[t._v("Functions")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#resolve"}},[t._v("resolve()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#reject"}},[t._v("reject()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#all"}},[t._v("all()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#race"}},[t._v("race()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#any"}},[t._v("any()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#some"}},[t._v("some()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#map"}},[t._v("map()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#reduce"}},[t._v("reduce()")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#promisorinterface"}},[t._v("PromisorInterface")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#examples"}},[t._v("Examples")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#how-to-use-deferred"}},[t._v("How to use Deferred")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#how-promise-forwarding-works"}},[t._v("How promise forwarding works")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#resolution-forwarding"}},[t._v("Resolution forwarding")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#rejection-forwarding"}},[t._v("Rejection forwarding")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#mixed-resolution-and-rejection-forwarding"}},[t._v("Mixed resolution and rejection forwarding")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#progress-event-forwarding"}},[t._v("Progress event forwarding")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#done-vs-then"}},[t._v("done() vs. then()")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#credits"}},[t._v("Credits")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#license"}},[t._v("License")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduction")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"concepts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concepts","aria-hidden":"true"}},[this._v("#")]),this._v(" Concepts")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"deferred"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deferred","aria-hidden":"true"}},[this._v("#")]),this._v(" Deferred")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("A "),s("strong",[this._v("Deferred")]),this._v(" represents a computation or unit of work that may not have\ncompleted yet. Typically (but not always), that computation will be something\nthat executes asynchronously and completes at some point in the future.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"promise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("While a deferred represents the computation itself, a "),s("strong",[this._v("Promise")]),this._v(" represents\nthe result of that computation. Thus, each deferred has a promise that acts as\na placeholder for its actual result.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[this._v("#")]),this._v(" API")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"deferred-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deferred-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Deferred")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$value")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$reason")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("notify")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("promise")]),this._v(" method returns the promise of the deferred.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("resolve")]),this._v(" and "),s("code",[this._v("reject")]),this._v(" methods control the state of the deferred.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("notify")]),this._v(" method is for progress notification.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The constructor of the "),s("code",[this._v("Deferred")]),this._v(" accepts an optional "),s("code",[this._v("$canceller")]),this._v(" argument.\nSee "),s("a",{attrs:{href:"#promise-1"}},[this._v("Promise")]),this._v(" for more information.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"deferred-promise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deferred-promise","aria-hidden":"true"}},[this._v("#")]),this._v(" Deferred::promise()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"deferred-resolve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deferred-resolve","aria-hidden":"true"}},[this._v("#")]),this._v(" Deferred::resolve()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$value")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Resolves the promise returned by "),a("code",[t._v("promise()")]),t._v(". All consumers are notified by\nhaving "),a("code",[t._v("$onFulfilled")]),t._v(" (which they registered via "),a("code",[t._v("$promise->then()")]),t._v(") called with\n"),a("code",[t._v("$value")]),t._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$value")]),this._v(" itself is a promise, the promise will transition to the state of\nthis promise once it is resolved.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"deferred-reject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deferred-reject","aria-hidden":"true"}},[this._v("#")]),this._v(" Deferred::reject()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$reason")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Rejects the promise returned by "),a("code",[t._v("promise()")]),t._v(", signalling that the deferred's\ncomputation failed.\nAll consumers are notified by having "),a("code",[t._v("$onRejected")]),t._v(" (which they registered via\n"),a("code",[t._v("$promise->then()")]),t._v(") called with "),a("code",[t._v("$reason")]),t._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$reason")]),this._v(" itself is a promise, the promise will be rejected with the outcome\nof this promise regardless whether it fulfills or rejects.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"deferred-notify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deferred-notify","aria-hidden":"true"}},[this._v("#")]),this._v(" Deferred::notify()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("notify")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("All consumers are notified by having "),s("code",[this._v("$onProgress")]),this._v(" (which they registered via\n"),s("code",[this._v("$promise->then()")]),this._v(") called with "),s("code",[this._v("$update")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"promiseinterface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promiseinterface","aria-hidden":"true"}},[this._v("#")]),this._v(" PromiseInterface")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"implementations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementations","aria-hidden":"true"}},[this._v("#")]),this._v(" Implementations")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"#promise-1"}},[this._v("Promise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#fulfilledpromise"}},[this._v("FulfilledPromise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#rejectedpromise"}},[this._v("RejectedPromise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#lazypromise"}},[this._v("LazyPromise")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"promiseinterface-then"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promiseinterface-then","aria-hidden":"true"}},[this._v("#")]),this._v(" PromiseInterface::then()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$transformedPromise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onFulfilled")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onRejected")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onProgress")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("then()")]),this._v(" method registers new fulfilled, rejection and progress handlers\nwith a promise (all parameters are optional):")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("$onFulfilled")]),t._v(" will be invoked once the promise is fulfilled and passed\nthe result as the first argument.")]),t._v(" "),a("li",[a("code",[t._v("$onRejected")]),t._v(" will be invoked once the promise is rejected and passed the\nreason as the first argument.")]),t._v(" "),a("li",[a("code",[t._v("$onProgress")]),t._v(" will be invoked whenever the producer of the promise\ntriggers progress notifications and passed a single argument (whatever it\nwants) to indicate progress.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("It returns a new promise that will fulfill with the return value of either\n"),s("code",[this._v("$onFulfilled")]),this._v(" or "),s("code",[this._v("$onRejected")]),this._v(", whichever is called, or will reject with\nthe thrown exception if either throws.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("A promise makes the following guarantees about handlers registered in\nthe same call to "),s("code",[this._v("then()")]),this._v(":")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("Only one of "),a("code",[t._v("$onFulfilled")]),t._v(" or "),a("code",[t._v("$onRejected")]),t._v(" will be called,\nnever both.")]),t._v(" "),a("li",[a("code",[t._v("$onFulfilled")]),t._v(" and "),a("code",[t._v("$onRejected")]),t._v(" will never be called more\nthan once.")]),t._v(" "),a("li",[a("code",[t._v("$onProgress")]),t._v(" may be called multiple times.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"see-also"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#see-also","aria-hidden":"true"}},[this._v("#")]),this._v(" See also")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("a",{attrs:{href:"#resolve"}},[t._v("resolve()")]),t._v(" - Creating a resolved promise")]),t._v(" "),a("li",[a("a",{attrs:{href:"#reject"}},[t._v("reject()")]),t._v(" - Creating a rejected promise")]),t._v(" "),a("li",[a("a",{attrs:{href:"#extendedpromiseinterfacedone"}},[t._v("ExtendedPromiseInterface::done()")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#done-vs-then"}},[t._v("done() vs. then()")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"extendedpromiseinterface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extendedpromiseinterface","aria-hidden":"true"}},[this._v("#")]),this._v(" ExtendedPromiseInterface")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"implementations-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementations-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Implementations")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"#promise-1"}},[this._v("Promise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#fulfilledpromise"}},[this._v("FulfilledPromise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#rejectedpromise"}},[this._v("RejectedPromise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#lazypromise"}},[this._v("LazyPromise")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"extendedpromiseinterface-done"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extendedpromiseinterface-done","aria-hidden":"true"}},[this._v("#")]),this._v(" ExtendedPromiseInterface::done()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("done")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onFulfilled")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onRejected")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onProgress")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("It will cause a fatal error if either "),s("code",[this._v("$onFulfilled")]),this._v(" or "),s("code",[this._v("$onRejected")]),this._v(" throw or\nreturn a rejected promise.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Since the purpose of "),s("code",[this._v("done()")]),this._v(" is consumption rather than transformation,\n"),s("code",[this._v("done()")]),this._v(" always returns "),s("code",[this._v("null")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"see-also-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#see-also-2","aria-hidden":"true"}},[this._v("#")]),this._v(" See also")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"#promiseinterfacethen"}},[this._v("PromiseInterface::then()")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#done-vs-then"}},[this._v("done() vs. then()")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"extendedpromiseinterface-otherwise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extendedpromiseinterface-otherwise","aria-hidden":"true"}},[this._v("#")]),this._v(" ExtendedPromiseInterface::otherwise()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onRejected")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$onRejected")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Additionally, you can type hint the "),s("code",[this._v("$reason")]),this._v(" argument of "),s("code",[this._v("$onRejected")]),this._v(" to catch\nonly specific errors.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\"),a("span",{attrs:{class:"token package"}},[t._v("RuntimeException")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$reason")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Only catch \\RuntimeException instances")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// All other types of errors will propagate automatically")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$reason")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Catch other errors")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"extendedpromiseinterface-always"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extendedpromiseinterface-always","aria-hidden":"true"}},[this._v("#")]),this._v(" ExtendedPromiseInterface::always()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$newPromise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("always")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onFulfilledOrRejected")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("It arranges for "),s("code",[this._v("$onFulfilledOrRejected")]),this._v(" to be called, with no arguments,\nwhen the promise is either fulfilled or rejected.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("If "),a("code",[t._v("$promise")]),t._v(" fulfills, and "),a("code",[t._v("$onFulfilledOrRejected")]),t._v(" returns successfully,\n"),a("code",[t._v("$newPromise")]),t._v(" will fulfill with the same value as "),a("code",[t._v("$promise")]),t._v(".")]),t._v(" "),a("li",[t._v("If "),a("code",[t._v("$promise")]),t._v(" fulfills, and "),a("code",[t._v("$onFulfilledOrRejected")]),t._v(" throws or returns a\nrejected promise, "),a("code",[t._v("$newPromise")]),t._v(" will reject with the thrown exception or\nrejected promise's reason.")]),t._v(" "),a("li",[t._v("If "),a("code",[t._v("$promise")]),t._v(" rejects, and "),a("code",[t._v("$onFulfilledOrRejected")]),t._v(" returns successfully,\n"),a("code",[t._v("$newPromise")]),t._v(" will reject with the same reason as "),a("code",[t._v("$promise")]),t._v(".")]),t._v(" "),a("li",[t._v("If "),a("code",[t._v("$promise")]),t._v(" rejects, and "),a("code",[t._v("$onFulfilledOrRejected")]),t._v(" throws or returns a\nrejected promise, "),a("code",[t._v("$newPromise")]),t._v(" will reject with the thrown exception or\nrejected promise's reason.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("always()")]),this._v(" behaves similarly to the synchronous finally statement. When combined\nwith "),s("code",[this._v("otherwise()")]),this._v(", "),s("code",[this._v("always()")]),this._v(" allows you to write code that is similar to the familiar\nsynchronous catch/finally pair.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\"),a("span",{attrs:{class:"token package"}},[t._v("Exception")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$e")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handleError")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$e")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Similar asynchronous code (with "),s("code",[this._v("doSomething()")]),this._v(" that returns a promise) can be\nwritten:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'handleError'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("always")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'cleanup'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"extendedpromiseinterface-progress"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extendedpromiseinterface-progress","aria-hidden":"true"}},[this._v("#")]),this._v(" ExtendedPromiseInterface::progress()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("progress")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$onProgress")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$onProgress")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"cancellablepromiseinterface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cancellablepromiseinterface","aria-hidden":"true"}},[this._v("#")]),this._v(" CancellablePromiseInterface")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"cancellablepromiseinterface-cancel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cancellablepromiseinterface-cancel","aria-hidden":"true"}},[this._v("#")]),this._v(" CancellablePromiseInterface::cancel()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("cancel")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("cancel()")]),this._v(" method notifies the creator of the promise that there is no\nfurther interest in the results of the operation.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Once a promise is settled (either fulfilled or rejected), calling "),s("code",[this._v("cancel()")]),this._v(" on\na promise has no effect.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"implementations-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementations-3","aria-hidden":"true"}},[this._v("#")]),this._v(" Implementations")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"#promise-1"}},[this._v("Promise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#fulfilledpromise"}},[this._v("FulfilledPromise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#rejectedpromise"}},[this._v("RejectedPromise")])]),this._v(" "),s("li",[s("a",{attrs:{href:"#lazypromise"}},[this._v("LazyPromise")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"promise-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Creates a promise whose state is controlled by the functions passed to\n"),s("code",[this._v("$resolver")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$resolver")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$notify")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Do some work, possibly asynchronously, and then")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// resolve or reject. You can notify of progress events")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// along the way if you want/need.")]),t._v("\n\n    "),a("span",{attrs:{class:"token variable"}},[t._v("$resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$awesomeResult")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// or $resolve($anotherPromise);")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// or $reject($nastyError);")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// or $notify($progressNotification);")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$canceller")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callable "),a("span",{attrs:{class:"token variable"}},[t._v("$resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$progress")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Cancel/abort any running operations like network connections, streams etc.")]),t._v("\n\n    "),a("span",{attrs:{class:"token variable"}},[t._v("$reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'Promise cancelled'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$resolver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$canceller")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("$resolve($value)")]),t._v(" - Primary function that seals the fate of the\nreturned promise. Accepts either a non-promise value, or another promise.\nWhen called with a non-promise value, fulfills promise with that value.\nWhen called with another promise, e.g. "),a("code",[t._v("$resolve($otherPromise)")]),t._v(", promise's\nfate will be equivalent to that of "),a("code",[t._v("$otherPromise")]),t._v(".")]),t._v(" "),a("li",[a("code",[t._v("$reject($reason)")]),t._v(" - Function that rejects the promise.")]),t._v(" "),a("li",[a("code",[t._v("$notify($update)")]),t._v(" - Function that issues progress events for the promise.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The resolver function will be called immediately, the canceller function only\nonce all consumers called the "),s("code",[this._v("cancel()")]),this._v(" method of the promise.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"fulfilledpromise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fulfilledpromise","aria-hidden":"true"}},[this._v("#")]),this._v(" FulfilledPromise")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("FulfilledPromise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$value")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Note, that "),s("code",[this._v("$value")]),this._v(" "),s("strong",[this._v("cannot")]),this._v(" be a promise. It's recommended to use\n"),s("a",{attrs:{href:"#resolve"}},[this._v("resolve()")]),this._v(" for creating resolved promises.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"rejectedpromise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rejectedpromise","aria-hidden":"true"}},[this._v("#")]),this._v(" RejectedPromise")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("RejectedPromise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$reason")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Note, that "),s("code",[this._v("$reason")]),this._v(" "),s("strong",[this._v("cannot")]),this._v(" be a promise. It's recommended to use\n"),s("a",{attrs:{href:"#reject"}},[this._v("reject()")]),this._v(" for creating rejected promises.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"lazypromise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lazypromise","aria-hidden":"true"}},[this._v("#")]),this._v(" LazyPromise")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Creates a promise which will be lazily initialized by "),s("code",[this._v("$factory")]),this._v(" once a consumer\ncalls the "),s("code",[this._v("then()")]),this._v(" method.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$factory")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Do some heavy stuff here and resolve the deferred once completed")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("LazyPromise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$factory")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// $factory will only be executed once we call then()")]),t._v("\n"),a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$value")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#functions","aria-hidden":"true"}},[this._v("#")]),this._v(" Functions")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("All functions working on promise collections (like "),a("code",[t._v("all()")]),t._v(", "),a("code",[t._v("race()")]),t._v(", "),a("code",[t._v("some()")]),t._v("\netc.) support cancellation. This means, if you call "),a("code",[t._v("cancel()")]),t._v(" on the returned\npromise, all promises in the collection are cancelled. If the collection itself\nis a promise which resolves to an array, this promise is also cancelled.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"resolve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resolve","aria-hidden":"true"}},[this._v("#")]),this._v(" resolve()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$promiseOrValue")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Creates a promise for the supplied "),s("code",[this._v("$promiseOrValue")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$promiseOrValue")]),this._v(" is a value, it will be the resolution value of the\nreturned promise.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$promiseOrValue")]),this._v(" is a thenable (any object that provides a "),s("code",[this._v("then()")]),this._v(" method),\na trusted promise that follows the state of the thenable is returned.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$promiseOrValue")]),this._v(" is a promise, it will be returned as is.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Note: The promise returned is always a promise implementing\n"),s("a",{attrs:{href:"#extendedpromiseinterface"}},[this._v("ExtendedPromiseInterface")]),this._v(". If you pass in a custom\npromise which only implements "),s("a",{attrs:{href:"#promiseinterface"}},[this._v("PromiseInterface")]),this._v(", this\npromise will be assimilated to a extended promise following "),s("code",[this._v("$promiseOrValue")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"reject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reject","aria-hidden":"true"}},[this._v("#")]),this._v(" reject()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mixed "),a("span",{attrs:{class:"token variable"}},[t._v("$promiseOrValue")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Creates a rejected promise for the supplied "),s("code",[this._v("$promiseOrValue")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$promiseOrValue")]),this._v(" is a value, it will be the rejection value of the\nreturned promise.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If "),s("code",[this._v("$promiseOrValue")]),this._v(" is a promise, its completion value will be the rejected\nvalue of the returned promise.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"all"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#all","aria-hidden":"true"}},[this._v("#")]),this._v(" all()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("all")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("array")]),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PromiseInterface")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promisesOrValues")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Returns a promise that will resolve only once all the items in\n"),s("code",[this._v("$promisesOrValues")]),this._v(" have resolved. The resolution value of the returned promise\nwill be an array containing the resolution values of each of the items in\n"),s("code",[this._v("$promisesOrValues")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"race"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#race","aria-hidden":"true"}},[this._v("#")]),this._v(" race()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("race")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("array")]),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PromiseInterface")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promisesOrValues")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"any"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#any","aria-hidden":"true"}},[this._v("#")]),this._v(" any()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("any")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("array")]),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PromiseInterface")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promisesOrValues")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Returns a promise that will resolve when any one of the items in\n"),s("code",[this._v("$promisesOrValues")]),this._v(" resolves. The resolution value of the returned promise\nwill be the resolution value of the triggering item.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The returned promise will only reject if "),s("em",[this._v("all")]),this._v(" items in "),s("code",[this._v("$promisesOrValues")]),this._v(" are\nrejected. The rejection value will be an array of all rejection reasons.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The returned promise will also reject with a "),s("code",[this._v("React\\Promise\\Exception\\LengthException")]),this._v("\nif "),s("code",[this._v("$promisesOrValues")]),this._v(" contains 0 items.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"some"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#some","aria-hidden":"true"}},[this._v("#")]),this._v(" some()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("some")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("array")]),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PromiseInterface")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promisesOrValues")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" integer "),a("span",{attrs:{class:"token variable"}},[t._v("$howMany")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Returns a promise that will resolve when "),s("code",[this._v("$howMany")]),this._v(" of the supplied items in\n"),s("code",[this._v("$promisesOrValues")]),this._v(" resolve. The resolution value of the returned promise\nwill be an array of length "),s("code",[this._v("$howMany")]),this._v(" containing the resolution values of the\ntriggering items.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The returned promise will reject if it becomes impossible for "),s("code",[this._v("$howMany")]),this._v(" items\nto resolve (that is, when "),s("code",[this._v("(count($promisesOrValues) - $howMany) + 1")]),this._v(" items\nreject). The rejection value will be an array of\n"),s("code",[this._v("(count($promisesOrValues) - $howMany) + 1")]),this._v(" rejection reasons.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The returned promise will also reject with a "),s("code",[this._v("React\\Promise\\Exception\\LengthException")]),this._v("\nif "),s("code",[this._v("$promisesOrValues")]),this._v(" contains less items than "),s("code",[this._v("$howMany")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map","aria-hidden":"true"}},[this._v("#")]),this._v(" map()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("map")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("array")]),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PromiseInterface")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promisesOrValues")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$mapFunc")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Traditional map function, similar to "),s("code",[this._v("array_map()")]),this._v(", but allows input to contain\npromises and/or values, and "),s("code",[this._v("$mapFunc")]),this._v(" may return either a value or a promise.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The map function receives each item as argument, where item is a fully resolved\nvalue of a promise or value in "),s("code",[this._v("$promisesOrValues")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"reduce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reduce","aria-hidden":"true"}},[this._v("#")]),this._v(" reduce()")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$promise")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("reduce")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("array")]),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PromiseInterface")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$promisesOrValues")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callable "),a("span",{attrs:{class:"token variable"}},[t._v("$reduceFunc")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$initialValue")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Traditional reduce function, similar to "),a("code",[t._v("array_reduce()")]),t._v(", but input may contain\npromises and/or values, and "),a("code",[t._v("$reduceFunc")]),t._v(" may return either a value or a\npromise, "),a("em",[t._v("and")]),t._v(" "),a("code",[t._v("$initialValue")]),t._v(" may be a promise or a value for the starting\nvalue.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"promisorinterface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promisorinterface","aria-hidden":"true"}},[this._v("#")]),this._v(" PromisorInterface")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("React\\Promise\\PromisorInterface")]),this._v(" provides a common interface for objects\nthat provide a promise. "),s("code",[this._v("React\\Promise\\Deferred")]),this._v(" implements it, but since it\nis part of the public API anyone can implement it.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[this._v("#")]),this._v(" Examples")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"how-to-use-deferred"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-deferred","aria-hidden":"true"}},[this._v("#")]),this._v(" How to use Deferred")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getAwesomeResultPromise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Execute a Node.js-style function using the callback pattern")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("computeAwesomeResultAsynchronously")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$error")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$result")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$error")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$error")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$result")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// Return the promise")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("getAwesomeResultPromise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$value")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Deferred resolved, do something with $value")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$reason")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Deferred rejected, do something with $reason")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Progress notification triggered, do something with $update")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"how-promise-forwarding-works"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-promise-forwarding-works","aria-hidden":"true"}},[this._v("#")]),this._v(" How promise forwarding works")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"resolution-forwarding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resolution-forwarding","aria-hidden":"true"}},[this._v("#")]),this._v(" Resolution forwarding")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Resolved promises forward resolution values to the next promise.\nThe first promise, "),s("code",[this._v("$deferred->promise()")]),this._v(", will resolve with the value passed\nto "),s("code",[this._v("$deferred->resolve()")]),this._v(" below.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Each call to "),s("code",[this._v("then()")]),this._v(' returns a new promise that will resolve with the return\nvalue of the previous handler. This creates a promise "pipeline".')])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// $x will be the value passed to $deferred->resolve() below")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// and returns a *new promise* for $x + 1")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// $x === 2")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// This handler receives the return value of the")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// previous handler.")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// $x === 3")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// This handler receives the return value of the")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// previous handler.")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// $x === 4")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// This handler receives the return value of the")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// previous handler.")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'Resolve '")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v('// Prints "Resolve 4"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"rejection-forwarding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rejection-forwarding","aria-hidden":"true"}},[this._v("#")]),this._v(" Rejection forwarding")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\"),a("span",{attrs:{class:"token package"}},[t._v("Exception")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Propagate the rejection")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\"),a("span",{attrs:{class:"token package"}},[t._v("Exception")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Can also propagate by returning another rejection")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" React\\"),a("span",{attrs:{class:"token package"}},[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("reject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'Reject '")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v('// Prints "Reject 3"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"mixed-resolution-and-rejection-forwarding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mixed-resolution-and-rejection-forwarding","aria-hidden":"true"}},[this._v("#")]),this._v(" Mixed resolution and rejection forwarding")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("otherwise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\"),a("span",{attrs:{class:"token package"}},[t._v("Exception")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Handle the rejection, and don't propagate.")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// This is like catch without a rethrow")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'Mixed '")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$x")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 4")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v('// Prints "Mixed 4"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"progress-event-forwarding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#progress-event-forwarding","aria-hidden":"true"}},[this._v("#")]),this._v(" Progress event forwarding")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In the same way as resolution and rejection handlers, your progress handler\n"),s("strong",[this._v("MUST")]),this._v(" return a progress event to be propagated to the next link in the chain.\nIf you return nothing, "),s("code",[this._v("null")]),this._v(" will be propagated.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Deferred")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("promise")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("progress")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("progress")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'Progress '")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$update")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token variable"}},[t._v("$deferred")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("notify")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v('// Prints "Progress 2"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"done-vs-then"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#done-vs-then","aria-hidden":"true"}},[this._v("#")]),this._v(" done() vs. then()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("pre",[s("code",[this._v("Either return your promise, or call done() on it.\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("At a first glance, "),s("code",[this._v("then()")]),this._v(" and "),s("code",[this._v("done()")]),this._v(" seem very similar. However, there are\nimportant distinctions.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The intent of "),s("code",[this._v("then()")]),this._v(" is to transform a promise's value and to pass or return\na new promise for the transformed value along to other parts of your code.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The intent of "),s("code",[this._v("done()")]),this._v(" is to consume a promise's value, transferring\nresponsibility for the value to your code.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In addition to transforming a value, "),s("code",[this._v("then()")]),this._v(" allows you to recover from, or\npropagate intermediate errors. Any errors that are not handled will be caught\nby the promise machinery and used to reject the promise returned by "),s("code",[this._v("then()")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Calling "),s("code",[this._v("done()")]),this._v(" transfers all responsibility for errors to your code. If an\nerror (either a thrown exception or returned rejection) escapes the\n"),s("code",[this._v("$onFulfilled")]),this._v(" or "),s("code",[this._v("$onRejected")]),this._v(" callbacks you provide to done, it will be\nrethrown in an uncatchable way causing a fatal error.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getJsonResult")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("queryApi")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Transform API results to an object")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$jsonResultString")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("json_decode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$jsonResultString")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Transform API errors to an exception")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$jsonErrorString")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token variable"}},[t._v("$object")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("json_decode")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$jsonErrorString")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("ApiErrorException")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$object")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token property"}},[t._v("errorMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Here we provide no rejection handler. If the promise returned has been")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// rejected, the ApiErrorException will be thrown")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("getJsonResult")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("done")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Consume transformed object")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$jsonResultObject")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Do something with $jsonResultObject")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Here we provide a rejection handler which will either throw while debugging")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// or log the exception")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("getJsonResult")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("done")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$jsonResultObject")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("// Do something with $jsonResultObject")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ApiErrorException "),a("span",{attrs:{class:"token variable"}},[t._v("$exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("isDebug")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token function"}},[t._v("logException")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$exception")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Note that if a rejection value is not an instance of "),s("code",[this._v("\\Exception")]),this._v(", it will be\nwrapped in an exception of the type "),s("code",[this._v("React\\Promise\\UnhandledRejectionException")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("You can get the original rejection reason by calling "),s("code",[this._v("$exception->getReason()")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"credits"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#credits","aria-hidden":"true"}},[this._v("#")]),this._v(" Credits")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"license"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#license","aria-hidden":"true"}},[this._v("#")]),this._v(" License")])}],!1,null,null,null);s.default=n.exports}}]);